{"ast":null,"code":"import{useCustomiserStore}from'@store/customiser';import cn from'classnames';import{AnimatePresence,motion}from'framer-motion';import{Suspense,useEffect,useMemo,useRef,useState}from'react';import NavFitting from'../NavFitting';import NavFlags from'../NavFlags';import NavHeader from'../NavHeader';import NavImages from'../NavImages';import NavOptions from'../NavOptions';import NavPart from'../NavPart';import NavSize from'../NavSize';import NavText from'../NavText';import styles from'./CustomiserNav.module.scss';import NavHeaderScroll from'../NavHeader/NavHeaderScroll';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const CustomiserNav=_ref=>{let{className,focusCameraOnPart}=_ref;const[isOpen,setIsOpen]=useState(false);const[scrollCoordinates,setScrollCoordinates]=useState({left:0,top:0});const{selectedPart,selectedNav,texts,isMinimizedCustomiserNav,updateIsMinimizedCustomiserNav}=useCustomiserStore();const scrollableRef=useRef(null);const editText=useMemo(()=>texts===null||texts===void 0?void 0:texts.find(g=>g.edit),[texts]);const isFullscreen=useMemo(()=>(selectedNav===null||selectedNav===void 0?void 0:selectedNav.name)==='Text'&&editText,[selectedNav,editText]);const rootClassName=cn(styles.root,{[styles.open]:isOpen,[styles.minimized]:isMinimizedCustomiserNav,[styles.hasActions]:selectedNav===null||selectedNav===void 0?void 0:selectedNav.hasActions,[styles.isFullscreen]:false},className);const saveScrollCoordinates=()=>{if(isOpen&&scrollableRef.current){setScrollCoordinates({left:scrollableRef.current.scrollLeft,top:scrollableRef.current.scrollTop});}};useEffect(()=>{if(isOpen&&scrollableRef.current){scrollableRef.current.scrollTo({...scrollCoordinates,// Typescript issue: https://github.com/Microsoft/TypeScript/issues/28755\n// eslint-disable-next-line\n// @ts-ignore\nbehavior:'instant'});}},[isOpen]);const toggleOpen=()=>{saveScrollCoordinates();setIsOpen(!isOpen);};useEffect(()=>{if(selectedNav===null&&selectedPart===null){setIsOpen(true);}else{setIsOpen(false);updateIsMinimizedCustomiserNav(false);}},[selectedPart,selectedNav]);return/*#__PURE__*/_jsxs(motion.nav,{layout:\"preserve-aspect\",transition:{type:'spring',stiffness:700,damping:40},className:rootClassName,children:[/*#__PURE__*/_jsx(NavHeader,{className:styles.header,toggle:()=>toggleOpen(),isOpen:isOpen,onClick:()=>{updateIsMinimizedCustomiserNav(!isMinimizedCustomiserNav);},isMinimized:isMinimizedCustomiserNav}),selectedNav&&/*#__PURE__*/_jsx(NavHeaderScroll,{styles:styles}),/*#__PURE__*/_jsx(\"div\",{id:\"NavHeaderAfter\",className:styles.headerAfter}),/*#__PURE__*/_jsx(Suspense,{fallback:/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}),children:/*#__PURE__*/_jsx(AnimatePresence,{initial:false,children:/*#__PURE__*/_jsx(motion.div,{id:\"scrollable\",className:styles.content,initial:\"collapsed\",animate:\"open\",exit:\"collapsed\",variants:{open:{opacity:1},collapsed:{opacity:0}},ref:el=>{scrollableRef.current=el;},children:isOpen?/*#__PURE__*/_jsx(NavOptions,{toggle:()=>toggleOpen()}):(selectedNav===null||selectedNav===void 0?void 0:selectedNav.type)==='fitting'?/*#__PURE__*/_jsx(NavFitting,{focusCameraOnPart:focusCameraOnPart}):(selectedNav===null||selectedNav===void 0?void 0:selectedNav.type)==='names'?/*#__PURE__*/_jsx(NavText,{}):(selectedNav===null||selectedNav===void 0?void 0:selectedNav.type)==='flags'?/*#__PURE__*/_jsx(NavFlags,{}):(selectedNav===null||selectedNav===void 0?void 0:selectedNav.type)==='images'?/*#__PURE__*/_jsx(NavImages,{}):(selectedNav===null||selectedNav===void 0?void 0:selectedNav.type)==='size'?/*#__PURE__*/_jsx(NavSize,{}):selectedPart?/*#__PURE__*/_jsx(NavPart,{part:selectedPart}):null})})}),!isOpen&&(selectedNav===null||selectedNav===void 0?void 0:selectedNav.hasActions)&&/*#__PURE__*/_jsxs(\"div\",{className:styles.actions,children:[selectedPart&&/*#__PURE__*/_jsx(\"div\",{id:\"CustomiserNavMaterial\"}),/*#__PURE__*/_jsx(\"div\",{id:\"CustomiserNavActions\"})]})]});};export default CustomiserNav;","map":{"version":3,"names":["useCustomiserStore","cn","AnimatePresence","motion","Suspense","useEffect","useMemo","useRef","useState","NavFitting","NavFlags","NavHeader","NavImages","NavOptions","NavPart","NavSize","NavText","styles","NavHeaderScroll","jsx","_jsx","jsxs","_jsxs","CustomiserNav","_ref","className","focusCameraOnPart","isOpen","setIsOpen","scrollCoordinates","setScrollCoordinates","left","top","selectedPart","selectedNav","texts","isMinimizedCustomiserNav","updateIsMinimizedCustomiserNav","scrollableRef","editText","find","g","edit","isFullscreen","name","rootClassName","root","open","minimized","hasActions","saveScrollCoordinates","current","scrollLeft","scrollTop","scrollTo","behavior","toggleOpen","nav","layout","transition","type","stiffness","damping","children","header","toggle","onClick","isMinimized","id","headerAfter","fallback","initial","div","content","animate","exit","variants","opacity","collapsed","ref","el","part","actions"],"sources":["C:/Users/Reian/Desktop/Work/Freelance/Boxxer World/boxxerworld-shopify-frontend/customiser/src/components/nav/CustomiserNav/CustomiserNav.tsx"],"sourcesContent":["import { useCustomiserStore } from '@store/customiser';\r\nimport cn from 'classnames';\r\nimport { AnimatePresence, motion } from 'framer-motion';\r\nimport { Suspense, useEffect, useMemo, useRef, useState } from 'react';\r\nimport NavFitting from '../NavFitting';\r\nimport NavFlags from '../NavFlags';\r\nimport NavHeader from '../NavHeader';\r\nimport NavImages from '../NavImages';\r\nimport NavOptions from '../NavOptions';\r\nimport NavPart from '../NavPart';\r\nimport NavMinimize from '../NavMinimize';\r\nimport NavSize from '../NavSize';\r\nimport NavText from '../NavText';\r\n\r\nimport styles from './CustomiserNav.module.scss';\r\nimport { FocusCameraOnPart } from '@components/layout/Customiser/Customiser';\r\nimport NavHeaderScroll from '../NavHeader/NavHeaderScroll';\r\n\r\nexport interface CustomiserNavProps {\r\n  className?: string;\r\n  focusCameraOnPart?: FocusCameraOnPart;\r\n}\r\n\r\nconst CustomiserNav = ({ className, focusCameraOnPart }: CustomiserNavProps) => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [scrollCoordinates, setScrollCoordinates] = useState({ left: 0, top: 0 });\r\n\r\n  const {\r\n    selectedPart,\r\n    selectedNav,\r\n    texts,\r\n    isMinimizedCustomiserNav,\r\n    updateIsMinimizedCustomiserNav,\r\n  } = useCustomiserStore();\r\n\r\n  const scrollableRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  const editText = useMemo(() => texts?.find((g) => g.edit), [texts]);\r\n  const isFullscreen = useMemo(\r\n    () => selectedNav?.name === 'Text' && editText,\r\n    [selectedNav, editText],\r\n  );\r\n\r\n  const rootClassName = cn(\r\n    styles.root,\r\n    {\r\n      [styles.open]: isOpen,\r\n      [styles.minimized]: isMinimizedCustomiserNav,\r\n      [styles.hasActions]: selectedNav?.hasActions,\r\n      [styles.isFullscreen]: false,\r\n    },\r\n    className,\r\n  );\r\n\r\n  const saveScrollCoordinates = () => {\r\n    if (isOpen && scrollableRef.current) {\r\n      setScrollCoordinates({\r\n        left: scrollableRef.current.scrollLeft,\r\n        top: scrollableRef.current.scrollTop,\r\n      });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isOpen && scrollableRef.current) {\r\n      scrollableRef.current.scrollTo({\r\n        ...scrollCoordinates,\r\n        // Typescript issue: https://github.com/Microsoft/TypeScript/issues/28755\r\n        // eslint-disable-next-line\r\n        // @ts-ignore\r\n        behavior: 'instant',\r\n      });\r\n    }\r\n  }, [isOpen]);\r\n\r\n  const toggleOpen = () => {\r\n    saveScrollCoordinates();\r\n    setIsOpen(!isOpen);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (selectedNav === null && selectedPart === null) {\r\n      setIsOpen(true);\r\n    } else {\r\n      setIsOpen(false);\r\n      updateIsMinimizedCustomiserNav(false);\r\n    }\r\n  }, [selectedPart, selectedNav]);\r\n\r\n  return (\r\n    <motion.nav\r\n      layout='preserve-aspect'\r\n      transition={{\r\n        type: 'spring',\r\n        stiffness: 700,\r\n        damping: 40,\r\n      }}\r\n      className={rootClassName}\r\n    >\r\n      {/* {!isOpen && (\r\n        <NavMinimize\r\n          isMinimizedCustomiserNav={isMinimizedCustomiserNav}\r\n          onMinimize={() => updateIsMinimizedCustomiserNav(true)}\r\n          onMaximize={() => updateIsMinimizedCustomiserNav(false)}\r\n        />\r\n      )} */}\r\n      <NavHeader\r\n        className={styles.header}\r\n        toggle={() => toggleOpen()}\r\n        isOpen={isOpen}\r\n        onClick={() => {\r\n          updateIsMinimizedCustomiserNav(!isMinimizedCustomiserNav);\r\n        }}\r\n        isMinimized={isMinimizedCustomiserNav}\r\n      />\r\n      {selectedNav && <NavHeaderScroll styles={styles} />}\r\n      <div id='NavHeaderAfter' className={styles.headerAfter}></div>\r\n      <Suspense fallback={<div>Loading...</div>}>\r\n        <AnimatePresence initial={false}>\r\n          <motion.div\r\n            id='scrollable'\r\n            className={styles.content}\r\n            initial='collapsed'\r\n            animate='open'\r\n            exit='collapsed'\r\n            variants={{\r\n              open: { opacity: 1 },\r\n              collapsed: { opacity: 0 },\r\n            }}\r\n            ref={(el) => {\r\n              scrollableRef.current = el;\r\n            }}\r\n          >\r\n            {isOpen ? (\r\n              <NavOptions toggle={() => toggleOpen()} />\r\n            ) : selectedNav?.type === 'fitting' ? (\r\n              <NavFitting focusCameraOnPart={focusCameraOnPart} />\r\n            ) : selectedNav?.type === 'names' ? (\r\n              <NavText />\r\n            ) : selectedNav?.type === 'flags' ? (\r\n              <NavFlags />\r\n            ) : selectedNav?.type === 'images' ? (\r\n              <NavImages />\r\n            ) : selectedNav?.type === 'size' ? (\r\n              <NavSize />\r\n            ) : selectedPart ? (\r\n              <NavPart part={selectedPart} />\r\n            ) : null}\r\n          </motion.div>\r\n        </AnimatePresence>\r\n      </Suspense>\r\n      {!isOpen && selectedNav?.hasActions && (\r\n        <div className={styles.actions}>\r\n          {selectedPart && <div id='CustomiserNavMaterial'></div>}\r\n          <div id='CustomiserNavActions'></div>\r\n        </div>\r\n      )}\r\n    </motion.nav>\r\n  );\r\n};\r\n\r\nexport default CustomiserNav;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}