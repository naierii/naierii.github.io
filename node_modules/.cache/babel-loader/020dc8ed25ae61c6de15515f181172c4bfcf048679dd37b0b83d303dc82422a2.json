{"ast":null,"code":"import{Decal,useTexture}from'@react-three/drei';import{useMemo}from'react';import{Euler,MathUtils,Vector3}from'three';import{jsx as _jsx}from\"react/jsx-runtime\";const DecalGraphic=_ref=>{var _flag$flag,_flag$flag$attributes,_flag$flag$attributes2,_flag$flag$attributes3,_graphic$graphic,_graphic$graphic$attr,_graphic$graphic$attr2,_graphic$graphic$attr3,_graphic$graphic$attr4;let{flag,graphic,position,orientation,scale=1}=_ref;const texture=flag!==null&&flag!==void 0&&(_flag$flag=flag.flag)!==null&&_flag$flag!==void 0&&(_flag$flag$attributes=_flag$flag.attributes)!==null&&_flag$flag$attributes!==void 0&&(_flag$flag$attributes2=_flag$flag$attributes.image.data)!==null&&_flag$flag$attributes2!==void 0&&(_flag$flag$attributes3=_flag$flag$attributes2.attributes)!==null&&_flag$flag$attributes3!==void 0&&_flag$flag$attributes3.url?[flag.flag.attributes.image.data.attributes.url]:graphic!==null&&graphic!==void 0&&(_graphic$graphic=graphic.graphic)!==null&&_graphic$graphic!==void 0&&(_graphic$graphic$attr=_graphic$graphic.attributes)!==null&&_graphic$graphic$attr!==void 0&&(_graphic$graphic$attr2=_graphic$graphic$attr.image)!==null&&_graphic$graphic$attr2!==void 0&&(_graphic$graphic$attr3=_graphic$graphic$attr2.data)!==null&&_graphic$graphic$attr3!==void 0&&(_graphic$graphic$attr4=_graphic$graphic$attr3.attributes)!==null&&_graphic$graphic$attr4!==void 0&&_graphic$graphic$attr4.url?[graphic.graphic.attributes.image.data.attributes.url]:[];const[image]=useTexture(texture);const ratio=useMemo(()=>{var _image$source$data$wi,_image$source$data$he;const width=(_image$source$data$wi=image.source.data.width)!==null&&_image$source$data$wi!==void 0?_image$source$data$wi:1;const height=(_image$source$data$he=image.source.data.height)!==null&&_image$source$data$he!==void 0?_image$source$data$he:1;return width/height;},[image]);const rotationModifier=useMemo(()=>{const orientationCopy=new Euler().fromArray(orientation);const currentAngle=MathUtils.radToDeg(orientationCopy.z);const decalRotation=(flag===null||flag===void 0?void 0:flag.decalRotation)||(graphic===null||graphic===void 0?void 0:graphic.decalRotation);const newAngle=currentAngle+(decalRotation!==null&&decalRotation!==void 0?decalRotation:0);orientationCopy.z=MathUtils.degToRad(newAngle);return orientationCopy;},[flag===null||flag===void 0?void 0:flag.decalRotation,graphic===null||graphic===void 0?void 0:graphic.decalRotation,orientation]);const scaleModifier=useMemo(()=>{return new Vector3(1*ratio*scale,1*scale,4);},[scale]);if(!image){return null;}return/*#__PURE__*/_jsx(Decal,{position:position,rotation:rotationModifier,scale:scaleModifier,children:/*#__PURE__*/_jsx(\"meshPhongMaterial\",{map:image,transparent:true,depthTest:true,depthWrite:false,polygonOffset:true,polygonOffsetFactor:-20,needsUpdate:true})});};export default DecalGraphic;","map":{"version":3,"names":["Decal","useTexture","useMemo","Euler","MathUtils","Vector3","jsx","_jsx","DecalGraphic","_ref","_flag$flag","_flag$flag$attributes","_flag$flag$attributes2","_flag$flag$attributes3","_graphic$graphic","_graphic$graphic$attr","_graphic$graphic$attr2","_graphic$graphic$attr3","_graphic$graphic$attr4","flag","graphic","position","orientation","scale","texture","attributes","image","data","url","ratio","_image$source$data$wi","_image$source$data$he","width","source","height","rotationModifier","orientationCopy","fromArray","currentAngle","radToDeg","z","decalRotation","newAngle","degToRad","scaleModifier","rotation","children","map","transparent","depthTest","depthWrite","polygonOffset","polygonOffsetFactor","needsUpdate"],"sources":["C:/Users/Reian/Desktop/Work/Freelance/Boxxer World/boxxerworld-shopify-frontend/customiser/src/components/three/DecalGraphic/DecalGraphic.tsx"],"sourcesContent":["import { Decal, useTexture } from '@react-three/drei';\r\nimport { EulerArray, FlagCustomiser, GraphicCustomiser, Vector3Array } from '@store/customiser';\r\nimport { log } from 'console';\r\nimport { useMemo } from 'react';\r\nimport { Euler, EulerOrder, MathUtils, Vector3 } from 'three';\r\nexport interface DecalGraphicProps {\r\n  flag?: FlagCustomiser;\r\n  graphic?: GraphicCustomiser;\r\n  position: Vector3Array;\r\n  orientation: EulerArray;\r\n  scale?: number;\r\n}\r\n\r\nconst DecalGraphic = ({ flag, graphic, position, orientation, scale = 1 }: DecalGraphicProps) => {\r\n  const texture = flag?.flag?.attributes?.image.data?.attributes?.url\r\n    ? [flag.flag.attributes.image.data.attributes.url]\r\n    : graphic?.graphic?.attributes?.image?.data?.attributes?.url\r\n    ? [graphic.graphic.attributes.image.data.attributes.url]\r\n    : [];\r\n\r\n  const [image] = useTexture(texture);\r\n\r\n  const ratio = useMemo(() => {\r\n    const width = image.source.data.width ?? 1;\r\n    const height = image.source.data.height ?? 1;\r\n    return width / height;\r\n  }, [image]);\r\n\r\n  const rotationModifier = useMemo(() => {\r\n    const orientationCopy = new Euler().fromArray(\r\n      orientation as [number, number, number, (EulerOrder | undefined)?, ...any[]],\r\n    );\r\n    const currentAngle = MathUtils.radToDeg(orientationCopy.z);\r\n    const decalRotation = flag?.decalRotation || graphic?.decalRotation;\r\n    const newAngle = currentAngle + (decalRotation ?? 0);\r\n    orientationCopy.z = MathUtils.degToRad(newAngle);\r\n    return orientationCopy;\r\n  }, [flag?.decalRotation, graphic?.decalRotation, orientation]);\r\n\r\n  const scaleModifier = useMemo(() => {\r\n    return new Vector3(1 * ratio * scale, 1 * scale, 4);\r\n  }, [scale]);\r\n\r\n  if (!image) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <Decal position={position} rotation={rotationModifier} scale={scaleModifier}>\r\n      <meshPhongMaterial\r\n        map={image}\r\n        transparent\r\n        depthTest\r\n        depthWrite={false}\r\n        polygonOffset\r\n        polygonOffsetFactor={-20}\r\n        needsUpdate\r\n      />\r\n    </Decal>\r\n  );\r\n};\r\n\r\nexport default DecalGraphic;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}