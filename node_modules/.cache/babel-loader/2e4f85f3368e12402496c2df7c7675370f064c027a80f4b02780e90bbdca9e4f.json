{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Reian\\\\Desktop\\\\Work\\\\Freelance\\\\Boxxer World\\\\boxxerworld-shopify-frontend\\\\customiser\\\\src\\\\components\\\\nav\\\\NavText\\\\NavTextPreview.tsx\",\n  _s = $RefreshSig$();\nimport { CanvasText, getMaterialUrl } from '@lib/canvas';\nimport { useCustomiserStore } from '@store/customiser';\nimport { useEffect, useMemo, useRef, useState } from 'react';\nimport { CanvasTexture } from 'three';\nimport { usePortalRef } from '@hooks';\nimport { createPortal } from 'react-dom';\nimport styles from './NavText.module.scss';\nimport { loadImage } from '@lib/img.util';\nimport { Canvas } from '@react-three/fiber';\nimport Lights from '@components/three/Lights';\n\n// TODO - Pre load the fonts somewhere\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nasync function loadFonts(fontUrl) {\n  const font = new FontFace('testFont', `url(${fontUrl})`);\n  await font.load();\n  document.fonts.add(font);\n}\nfunction getPatternType({\n  hasCrystals,\n  isLuxury\n}) {\n  if (!hasCrystals && isLuxury) return 'embroidery';else if (hasCrystals) return 'crystals';\n  return '';\n}\nconst cameraDefault = [0, 2.1970893240496195e-15, 15.31024512625285];\nconst NavTextPreview = ({\n  editText\n}) => {\n  _s();\n  var _editText$selectedNam;\n  const previewImgRef = useRef(null);\n  const [fontFamily, setFontFamily] = useState(editText === null || editText === void 0 ? void 0 : editText.font);\n  const [isVisiblePreview, setIsVisiblePreview] = useState(false);\n  const hasCrystals = editText !== null && editText !== void 0 && editText.crystalPrice ? true : false;\n  const isLuxury = (editText === null || editText === void 0 ? void 0 : (_editText$selectedNam = editText.selectedName) === null || _editText$selectedNam === void 0 ? void 0 : _editText$selectedNam.id) === '2' ? true : false;\n  const hasPuff = editText !== null && editText !== void 0 && editText.puffPrice && !hasCrystals ? true : false; // 3D puff\n  const toNormalMap = hasCrystals ? false : true;\n  const patternType = getPatternType({\n    hasCrystals,\n    isLuxury\n  });\n  const canvasRef = useRef(null);\n  const {\n    updateText\n  } = useCustomiserStore();\n  const portalRef = usePortalRef('NavHeaderAfter');\n\n  /**\r\n   * Save image here\r\n   */\n  const materialImgMemo = useMemo(() => {\n    return loadImage(getMaterialUrl(editText === null || editText === void 0 ? void 0 : editText.material));\n  }, [editText === null || editText === void 0 ? void 0 : editText.material]);\n  const outlineImgMemo = useMemo(() => {\n    return loadImage(getMaterialUrl(editText === null || editText === void 0 ? void 0 : editText.outline));\n  }, [editText === null || editText === void 0 ? void 0 : editText.outline]);\n  const fabricPatternImgMemo = useMemo(() => {\n    return loadImage('/Fabric_Knitted_006_height_small.png');\n  }, []);\n  const crystalNormalMapImgMemo = useMemo(() => {\n    // return loadImage('/crystal-32.png');\n    // return loadImage('/sphere-32.png');\n    // return loadImage('/ring-32.png');\n    // return loadImage('/grid-circle.png');\n    // return loadImage('/pyramid-24.png');\n    // return loadImage('/crystal-16.png');\n    return loadImage('/crystal-12.png');\n  }, []);\n  const crystalEmissiveMapImgMemo = useMemo(() => {\n    return loadImage('/crystal-emissive-12.png');\n  }, []);\n  useEffect(() => {\n    const previewImgDom = previewImgRef.current;\n    (async () => {\n      const canvasText = new CanvasText({\n        hasPuff,\n        toNormalMap,\n        patternType,\n        text: editText === null || editText === void 0 ? void 0 : editText.text\n      });\n      if (!editText || !editText.key || !isVisiblePreview) {\n        canvasText.clear();\n        return;\n      }\n      if (!editText.text) {\n        canvasText.clear();\n        updateText(editText.key, {\n          preview: new CanvasTexture(canvasText.getOutlineCanvas())\n        });\n        return;\n      }\n\n      // Adjust this once preloading fonts has been implemented\n      if (fontFamily !== (editText === null || editText === void 0 ? void 0 : editText.font)) {\n        setFontFamily(editText === null || editText === void 0 ? void 0 : editText.font);\n        await loadFonts(editText === null || editText === void 0 ? void 0 : editText.font);\n      }\n      const img = (editText === null || editText === void 0 ? void 0 : editText.material) && (await materialImgMemo);\n      const outlineImg = (editText === null || editText === void 0 ? void 0 : editText.outline) && (await outlineImgMemo);\n      const embroideryPattern = await fabricPatternImgMemo;\n      const crystalNormalMap = await crystalNormalMapImgMemo;\n      const crystalEmissiveMap = await crystalEmissiveMapImgMemo;\n      const shouldUsePattern = isLuxury && !hasPuff;\n      const patternImg = shouldUsePattern && (hasCrystals ? crystalNormalMap : embroideryPattern);\n      await canvasText.previewText({\n        material: img,\n        outline: outlineImg,\n        previewImg: previewImgDom,\n        normalMapPatternImg: patternImg,\n        emissiveMap: crystalEmissiveMap\n      });\n      updateText(editText.key, {\n        preview: new CanvasTexture(canvasText.getOutlineCanvas()),\n        normalMap: new CanvasTexture(canvasText.getNormalMapOutlineCanvas()),\n        emissiveMap: new CanvasTexture(canvasText.getEmissiveMapCanvas())\n      });\n    })();\n  }, [editText === null || editText === void 0 ? void 0 : editText.text, editText === null || editText === void 0 ? void 0 : editText.material, editText === null || editText === void 0 ? void 0 : editText.outline, editText === null || editText === void 0 ? void 0 : editText.font, isVisiblePreview, editText === null || editText === void 0 ? void 0 : editText.puffPrice, editText === null || editText === void 0 ? void 0 : editText.crystalPrice]);\n  if (!portalRef) {\n    return null;\n  }\n  return /*#__PURE__*/createPortal( /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"testPreview\",\n      style: {\n        position: 'absolute',\n        zIndex: '100'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.textPreview,\n      children: !(editText !== null && editText !== void 0 && editText.text) ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.noText,\n        children: \"Enter text to show preview\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.textPreview__imgContainer,\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            height: 80,\n            width: 640,\n            ref: el => {\n              previewImgRef.current = el;\n              setIsVisiblePreview(!!el);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 15\n          }, this), editText.decalPosition && editText.decalOrientation && /*#__PURE__*/_jsxDEV(Canvas, {\n            linear: true,\n            flat: true,\n            camera: {\n              position: cameraDefault,\n              fov: 45\n            },\n            dpr: window.devicePixelRatio,\n            gl: {\n              preserveDrawingBuffer: true\n            },\n            ref: canvasRef,\n            frameloop: \"demand\",\n            children: /*#__PURE__*/_jsxDEV(Lights, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 13\n        }, this)\n      }, void 0, false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true), portalRef);\n};\n_s(NavTextPreview, \"dj3Zgnk/DOyVEbcp8wa+GF5oDFA=\", false, function () {\n  return [useCustomiserStore, usePortalRef];\n});\n_c = NavTextPreview;\nexport default NavTextPreview;\nvar _c;\n$RefreshReg$(_c, \"NavTextPreview\");","map":{"version":3,"names":["CanvasText","getMaterialUrl","useCustomiserStore","useEffect","useMemo","useRef","useState","CanvasTexture","usePortalRef","createPortal","styles","loadImage","Canvas","Lights","jsxDEV","_jsxDEV","Fragment","_Fragment","loadFonts","fontUrl","font","FontFace","load","document","fonts","add","getPatternType","hasCrystals","isLuxury","cameraDefault","NavTextPreview","editText","_s","_editText$selectedNam","previewImgRef","fontFamily","setFontFamily","isVisiblePreview","setIsVisiblePreview","crystalPrice","selectedName","id","hasPuff","puffPrice","toNormalMap","patternType","canvasRef","updateText","portalRef","materialImgMemo","material","outlineImgMemo","outline","fabricPatternImgMemo","crystalNormalMapImgMemo","crystalEmissiveMapImgMemo","previewImgDom","current","canvasText","text","key","clear","preview","getOutlineCanvas","img","outlineImg","embroideryPattern","crystalNormalMap","crystalEmissiveMap","shouldUsePattern","patternImg","previewText","previewImg","normalMapPatternImg","emissiveMap","normalMap","getNormalMapOutlineCanvas","getEmissiveMapCanvas","children","style","position","zIndex","fileName","_jsxFileName","lineNumber","columnNumber","className","textPreview","noText","textPreview__imgContainer","height","width","ref","el","decalPosition","decalOrientation","linear","flat","camera","fov","dpr","window","devicePixelRatio","gl","preserveDrawingBuffer","frameloop","_c","$RefreshReg$"],"sources":["C:/Users/Reian/Desktop/Work/Freelance/Boxxer World/boxxerworld-shopify-frontend/customiser/src/components/nav/NavText/NavTextPreview.tsx"],"sourcesContent":["import { CanvasText, PatternType, getMaterialUrl } from '@lib/canvas';\r\nimport { useCustomiserStore } from '@store/customiser';\r\nimport { useEffect, useMemo, useRef, useState } from 'react';\r\nimport { CanvasTexture } from 'three';\r\nimport type { NavTextSelectProps } from './NavTextSelect';\r\nimport { usePortalRef } from '@hooks';\r\nimport { createPortal } from 'react-dom';\r\n\r\nimport styles from './NavText.module.scss';\r\nimport { loadImage } from '@lib/img.util';\r\nimport DecalText from '@components/three/DecalText';\r\nimport { Canvas } from '@react-three/fiber';\r\nimport Lights from '@components/three/Lights';\r\n\r\n// TODO - Pre load the fonts somewhere\r\nasync function loadFonts(fontUrl: string) {\r\n  const font = new FontFace('testFont', `url(${fontUrl})`);\r\n  await font.load();\r\n  document.fonts.add(font);\r\n}\r\n\r\nfunction getPatternType({\r\n  hasCrystals,\r\n  isLuxury,\r\n}: {\r\n  hasCrystals: boolean;\r\n  isLuxury: boolean;\r\n}): PatternType {\r\n  if (!hasCrystals && isLuxury) return 'embroidery';\r\n  else if (hasCrystals) return 'crystals';\r\n\r\n  return '';\r\n}\r\n\r\nconst cameraDefault: [x: number, y: number, z: number] = [\r\n  0, 2.1970893240496195e-15, 15.31024512625285,\r\n];\r\n\r\nconst NavTextPreview = ({ editText }: NavTextSelectProps) => {\r\n  const previewImgRef = useRef<HTMLImageElement | null>(null);\r\n  const [fontFamily, setFontFamily] = useState<string | undefined>(editText?.font);\r\n  const [isVisiblePreview, setIsVisiblePreview] = useState(false);\r\n\r\n  const hasCrystals: boolean = editText?.crystalPrice ? true : false;\r\n  const isLuxury: boolean = editText?.selectedName?.id === '2' ? true : false;\r\n  const hasPuff: boolean = editText?.puffPrice && !hasCrystals ? true : false; // 3D puff\r\n  const toNormalMap = hasCrystals ? false : true;\r\n  const patternType = getPatternType({ hasCrystals, isLuxury });\r\n\r\n  const canvasRef = useRef<HTMLCanvasElement>(null);\r\n\r\n  const { updateText } = useCustomiserStore();\r\n\r\n  const portalRef = usePortalRef('NavHeaderAfter');\r\n\r\n  /**\r\n   * Save image here\r\n   */\r\n  const materialImgMemo = useMemo<Promise<HTMLImageElement>>(() => {\r\n    return loadImage(getMaterialUrl(editText?.material));\r\n  }, [editText?.material]);\r\n  const outlineImgMemo = useMemo<Promise<HTMLImageElement>>(() => {\r\n    return loadImage(getMaterialUrl(editText?.outline));\r\n  }, [editText?.outline]);\r\n  const fabricPatternImgMemo = useMemo<Promise<HTMLImageElement>>(() => {\r\n    return loadImage('/Fabric_Knitted_006_height_small.png');\r\n  }, []);\r\n  const crystalNormalMapImgMemo = useMemo<Promise<HTMLImageElement>>(() => {\r\n    // return loadImage('/crystal-32.png');\r\n    // return loadImage('/sphere-32.png');\r\n    // return loadImage('/ring-32.png');\r\n    // return loadImage('/grid-circle.png');\r\n    // return loadImage('/pyramid-24.png');\r\n    // return loadImage('/crystal-16.png');\r\n    return loadImage('/crystal-12.png');\r\n  }, []);\r\n  const crystalEmissiveMapImgMemo = useMemo<Promise<HTMLImageElement>>(() => {\r\n    return loadImage('/crystal-emissive-12.png');\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const previewImgDom = previewImgRef.current as HTMLImageElement;\r\n\r\n    (async () => {\r\n      const canvasText = new CanvasText({\r\n        hasPuff,\r\n        toNormalMap,\r\n        patternType,\r\n        text: editText?.text,\r\n      });\r\n\r\n      if (!editText || !editText.key || !isVisiblePreview) {\r\n        canvasText.clear();\r\n        return;\r\n      }\r\n\r\n      if (!editText.text) {\r\n        canvasText.clear();\r\n        updateText(editText.key, {\r\n          preview: new CanvasTexture(canvasText.getOutlineCanvas()),\r\n        });\r\n        return;\r\n      }\r\n\r\n      // Adjust this once preloading fonts has been implemented\r\n      if (fontFamily !== editText?.font) {\r\n        setFontFamily(editText?.font);\r\n        await loadFonts(editText?.font as string);\r\n      }\r\n\r\n      const img = editText?.material && (await materialImgMemo);\r\n      const outlineImg = editText?.outline && (await outlineImgMemo);\r\n      const embroideryPattern = await fabricPatternImgMemo;\r\n      const crystalNormalMap = await crystalNormalMapImgMemo;\r\n      const crystalEmissiveMap = await crystalEmissiveMapImgMemo;\r\n\r\n      const shouldUsePattern = isLuxury && !hasPuff;\r\n      const patternImg = shouldUsePattern && (hasCrystals ? crystalNormalMap : embroideryPattern);\r\n\r\n      await canvasText.previewText({\r\n        material: img,\r\n        outline: outlineImg,\r\n        previewImg: previewImgDom,\r\n        normalMapPatternImg: patternImg,\r\n        emissiveMap: crystalEmissiveMap,\r\n      });\r\n\r\n      updateText(editText.key, {\r\n        preview: new CanvasTexture(canvasText.getOutlineCanvas()),\r\n        normalMap: new CanvasTexture(canvasText.getNormalMapOutlineCanvas()),\r\n        emissiveMap: new CanvasTexture(canvasText.getEmissiveMapCanvas()),\r\n      });\r\n    })();\r\n  }, [\r\n    editText?.text,\r\n    editText?.material,\r\n    editText?.outline,\r\n    editText?.font,\r\n    isVisiblePreview,\r\n    editText?.puffPrice,\r\n    editText?.crystalPrice,\r\n  ]);\r\n\r\n  if (!portalRef) {\r\n    return null;\r\n  }\r\n\r\n  return createPortal(\r\n    <>\r\n      <div id='testPreview' style={{ position: 'absolute', zIndex: '100' }} />\r\n      <div className={styles.textPreview}>\r\n        {!editText?.text ? (\r\n          <div className={styles.noText}>Enter text to show preview</div>\r\n        ) : (\r\n          <>\r\n            <div className={styles.textPreview__imgContainer}>\r\n              <img\r\n                height={80}\r\n                width={640}\r\n                ref={(el) => {\r\n                  previewImgRef.current = el;\r\n                  setIsVisiblePreview(!!el);\r\n                }}\r\n              />\r\n              {editText.decalPosition && editText.decalOrientation && (\r\n                <Canvas\r\n                  linear\r\n                  flat\r\n                  camera={{\r\n                    position: cameraDefault,\r\n                    fov: 45,\r\n                  }}\r\n                  dpr={window.devicePixelRatio}\r\n                  gl={{ preserveDrawingBuffer: true }}\r\n                  ref={canvasRef}\r\n                  frameloop='demand'\r\n                >\r\n                  {/* <Scene\r\n                    onClick={onClick}\r\n                    onPointerDown={onPointerDown}\r\n                    onPointerMove={onPointerMove}\r\n                    ref={groupRef}\r\n                  /> */}\r\n                  <Lights />\r\n                </Canvas>\r\n              )}\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n    </>,\r\n    portalRef,\r\n  );\r\n};\r\n\r\nexport default NavTextPreview;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}