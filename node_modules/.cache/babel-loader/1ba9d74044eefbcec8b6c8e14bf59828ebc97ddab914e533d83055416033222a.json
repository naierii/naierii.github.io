{"ast":null,"code":"import{useCustomiserStore}from'@store/customiser';import cn from'classnames';import{AnimatePresence,motion}from'framer-motion';import{Suspense,useEffect,useMemo,useRef,useState}from'react';import NavFitting from'../NavFitting';import NavFlags from'../NavFlags';import NavHeader from'../NavHeader';import NavImages from'../NavImages';import NavPart from'../NavPart';import NavSize from'../NavSize';import NavText from'../NavText';import styles from'./CustomiserNav.module.scss';import NavHeaderScroll from'../NavHeader/NavHeaderScroll';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const CustomiserNav=_ref=>{let{className,focusCameraOnPart}=_ref;const[isOpen,setIsOpen]=useState(false);const[scrollCoordinates,setScrollCoordinates]=useState({left:0,top:0});const[showEditText,setShowEditText]=useState(false);const{selectedPart,selectedNav,texts,isMinimizedCustomiserNav,updateIsMinimizedCustomiserNav}=useCustomiserStore();const scrollableRef=useRef(null);const editText=useMemo(()=>texts===null||texts===void 0?void 0:texts.find(g=>g.edit),[texts]);const isFullscreen=useMemo(()=>(selectedNav===null||selectedNav===void 0?void 0:selectedNav.name)==='Text'&&editText,[selectedNav,editText]);const rootClassName=cn(styles.root,{// [styles.open]: isOpen,\n[styles.minimized]:isMinimizedCustomiserNav,[styles.hasActions]:selectedNav===null||selectedNav===void 0?void 0:selectedNav.hasActions,[styles.isEdittingText]:(editText===null||editText===void 0?void 0:editText.text)&&showEditText,[styles.isFullscreen]:false},className);const saveScrollCoordinates=()=>{if(isOpen&&scrollableRef.current){setScrollCoordinates({left:scrollableRef.current.scrollLeft,top:scrollableRef.current.scrollTop});}};useEffect(()=>{if(isOpen&&scrollableRef.current){scrollableRef.current.scrollTo({...scrollCoordinates,// Typescript issue: https://github.com/Microsoft/TypeScript/issues/28755\n// eslint-disable-next-line\n// @ts-ignore\nbehavior:'instant'});}},[isOpen]);const toggleOpen=()=>{saveScrollCoordinates();setIsOpen(!isOpen);};useEffect(()=>{if(selectedNav===null&&selectedPart===null){setIsOpen(true);}else{setIsOpen(false);updateIsMinimizedCustomiserNav(false);}},[selectedPart,selectedNav]);return/*#__PURE__*/_jsxs(motion.nav,{layout:\"preserve-aspect\",transition:{type:'spring',stiffness:700,damping:40},className:rootClassName,children:[/*#__PURE__*/_jsx(NavHeader,{className:styles.header,toggle:()=>toggleOpen(),isOpen:isOpen,onClick:()=>{updateIsMinimizedCustomiserNav(!isMinimizedCustomiserNav);},isMinimized:isMinimizedCustomiserNav}),/*#__PURE__*/_jsx(NavHeaderScroll,{styles:styles}),/*#__PURE__*/_jsx(\"div\",{id:\"NavHeaderAfter\",className:styles.headerAfter}),/*#__PURE__*/_jsx(Suspense,{fallback:/*#__PURE__*/_jsx(\"div\",{style:{background:'white'},children:\"Loading...\"}),children:/*#__PURE__*/_jsx(AnimatePresence,{initial:false,children:/*#__PURE__*/_jsx(motion.div,{id:\"scrollable\",className:\"\".concat(styles.content,\" \").concat(isOpen&&styles.closed),initial:\"collapsed\",animate:\"open\",exit:\"collapsed\",variants:{open:{opacity:1},collapsed:{opacity:0}},ref:el=>{scrollableRef.current=el;},children:isOpen?null:(selectedNav===null||selectedNav===void 0?void 0:selectedNav.type)==='fitting'?/*#__PURE__*/_jsx(NavFitting,{focusCameraOnPart:focusCameraOnPart}):(selectedNav===null||selectedNav===void 0?void 0:selectedNav.type)==='names'?/*#__PURE__*/_jsx(NavText,{showEditText:showEditText,setShowEditText:setShowEditText}):(selectedNav===null||selectedNav===void 0?void 0:selectedNav.type)==='flags'?/*#__PURE__*/_jsx(NavFlags,{}):(selectedNav===null||selectedNav===void 0?void 0:selectedNav.type)==='images'?/*#__PURE__*/_jsx(NavImages,{}):(selectedNav===null||selectedNav===void 0?void 0:selectedNav.type)==='size'?/*#__PURE__*/_jsx(NavSize,{}):selectedPart?/*#__PURE__*/_jsx(NavPart,{part:selectedPart}):null})})}),!isOpen&&(selectedNav===null||selectedNav===void 0?void 0:selectedNav.hasActions)&&/*#__PURE__*/_jsxs(\"div\",{className:styles.actions,children:[selectedPart&&/*#__PURE__*/_jsx(\"div\",{id:\"CustomiserNavMaterial\",style:{background:'white'}}),/*#__PURE__*/_jsx(\"div\",{id:\"CustomiserNavActions\"})]})]});};export default CustomiserNav;","map":{"version":3,"names":["useCustomiserStore","cn","AnimatePresence","motion","Suspense","useEffect","useMemo","useRef","useState","NavFitting","NavFlags","NavHeader","NavImages","NavPart","NavSize","NavText","styles","NavHeaderScroll","jsx","_jsx","jsxs","_jsxs","CustomiserNav","_ref","className","focusCameraOnPart","isOpen","setIsOpen","scrollCoordinates","setScrollCoordinates","left","top","showEditText","setShowEditText","selectedPart","selectedNav","texts","isMinimizedCustomiserNav","updateIsMinimizedCustomiserNav","scrollableRef","editText","find","g","edit","isFullscreen","name","rootClassName","root","minimized","hasActions","isEdittingText","text","saveScrollCoordinates","current","scrollLeft","scrollTop","scrollTo","behavior","toggleOpen","nav","layout","transition","type","stiffness","damping","children","header","toggle","onClick","isMinimized","id","headerAfter","fallback","style","background","initial","div","concat","content","closed","animate","exit","variants","open","opacity","collapsed","ref","el","part","actions"],"sources":["C:/Users/Reian/Desktop/Work/Freelance/Boxxer World/boxxerworld-shopify-frontend/customiser/src/components/nav/CustomiserNav/CustomiserNav.tsx"],"sourcesContent":["import { useCustomiserStore } from '@store/customiser';\r\nimport cn from 'classnames';\r\nimport { AnimatePresence, motion } from 'framer-motion';\r\nimport { Suspense, useEffect, useMemo, useRef, useState } from 'react';\r\nimport NavFitting from '../NavFitting';\r\nimport NavFlags from '../NavFlags';\r\nimport NavHeader from '../NavHeader';\r\nimport NavImages from '../NavImages';\r\nimport NavPart from '../NavPart';\r\nimport NavMinimize from '../NavMinimize';\r\nimport NavSize from '../NavSize';\r\nimport NavText from '../NavText';\r\n\r\nimport styles from './CustomiserNav.module.scss';\r\nimport { FocusCameraOnPart } from '@components/layout/Customiser/Customiser';\r\nimport NavHeaderScroll from '../NavHeader/NavHeaderScroll';\r\n\r\nexport interface CustomiserNavProps {\r\n  className?: string;\r\n  focusCameraOnPart?: FocusCameraOnPart;\r\n}\r\n\r\nconst CustomiserNav = ({ className, focusCameraOnPart }: CustomiserNavProps) => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [scrollCoordinates, setScrollCoordinates] = useState({ left: 0, top: 0 });\r\n  const [showEditText, setShowEditText] = useState(false);\r\n\r\n  const {\r\n    selectedPart,\r\n    selectedNav,\r\n    texts,\r\n    isMinimizedCustomiserNav,\r\n    updateIsMinimizedCustomiserNav,\r\n  } = useCustomiserStore();\r\n\r\n  const scrollableRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  const editText = useMemo(() => texts?.find((g) => g.edit), [texts]);\r\n  const isFullscreen = useMemo(\r\n    () => selectedNav?.name === 'Text' && editText,\r\n    [selectedNav, editText],\r\n  );\r\n\r\n  const rootClassName = cn(\r\n    styles.root,\r\n    {\r\n      // [styles.open]: isOpen,\r\n      [styles.minimized]: isMinimizedCustomiserNav,\r\n      [styles.hasActions]: selectedNav?.hasActions,\r\n      [styles.isEdittingText]: editText?.text && showEditText,\r\n      [styles.isFullscreen]: false,\r\n    },\r\n    className,\r\n  );\r\n\r\n  const saveScrollCoordinates = () => {\r\n    if (isOpen && scrollableRef.current) {\r\n      setScrollCoordinates({\r\n        left: scrollableRef.current.scrollLeft,\r\n        top: scrollableRef.current.scrollTop,\r\n      });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isOpen && scrollableRef.current) {\r\n      scrollableRef.current.scrollTo({\r\n        ...scrollCoordinates,\r\n        // Typescript issue: https://github.com/Microsoft/TypeScript/issues/28755\r\n        // eslint-disable-next-line\r\n        // @ts-ignore\r\n        behavior: 'instant',\r\n      });\r\n    }\r\n  }, [isOpen]);\r\n\r\n  const toggleOpen = () => {\r\n    saveScrollCoordinates();\r\n    setIsOpen(!isOpen);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (selectedNav === null && selectedPart === null) {\r\n      setIsOpen(true);\r\n    } else {\r\n      setIsOpen(false);\r\n      updateIsMinimizedCustomiserNav(false);\r\n    }\r\n  }, [selectedPart, selectedNav]);\r\n\r\n  return (\r\n    <motion.nav\r\n      layout='preserve-aspect'\r\n      transition={{\r\n        type: 'spring',\r\n        stiffness: 700,\r\n        damping: 40,\r\n      }}\r\n      className={rootClassName}\r\n    >\r\n      {/* {!isOpen && (\r\n        <NavMinimize\r\n          isMinimizedCustomiserNav={isMinimizedCustomiserNav}\r\n          onMinimize={() => updateIsMinimizedCustomiserNav(true)}\r\n          onMaximize={() => updateIsMinimizedCustomiserNav(false)}\r\n        />\r\n      )} */}\r\n      <NavHeader\r\n        className={styles.header}\r\n        toggle={() => toggleOpen()}\r\n        isOpen={isOpen}\r\n        onClick={() => {\r\n          updateIsMinimizedCustomiserNav(!isMinimizedCustomiserNav);\r\n        }}\r\n        isMinimized={isMinimizedCustomiserNav}\r\n      />\r\n      {<NavHeaderScroll styles={styles} />}\r\n      <div id='NavHeaderAfter' className={styles.headerAfter}></div>\r\n      <Suspense fallback={<div style={{ background: 'white' }}>Loading...</div>}>\r\n        <AnimatePresence initial={false}>\r\n          <motion.div\r\n            id='scrollable'\r\n            className={`${styles.content} ${isOpen && styles.closed}`}\r\n            initial='collapsed'\r\n            animate='open'\r\n            exit='collapsed'\r\n            variants={{\r\n              open: { opacity: 1 },\r\n              collapsed: { opacity: 0 },\r\n            }}\r\n            ref={(el) => {\r\n              scrollableRef.current = el;\r\n            }}\r\n          >\r\n            {isOpen ? null : selectedNav?.type === 'fitting' ? (\r\n              <NavFitting focusCameraOnPart={focusCameraOnPart} />\r\n            ) : selectedNav?.type === 'names' ? (\r\n              <NavText showEditText={showEditText} setShowEditText={setShowEditText} />\r\n            ) : selectedNav?.type === 'flags' ? (\r\n              <NavFlags />\r\n            ) : selectedNav?.type === 'images' ? (\r\n              <NavImages />\r\n            ) : selectedNav?.type === 'size' ? (\r\n              <NavSize />\r\n            ) : selectedPart ? (\r\n              <NavPart part={selectedPart} />\r\n            ) : null}\r\n          </motion.div>\r\n        </AnimatePresence>\r\n      </Suspense>\r\n      {!isOpen && selectedNav?.hasActions && (\r\n        <div className={styles.actions}>\r\n          {selectedPart && <div id='CustomiserNavMaterial' style={{ background: 'white' }}></div>}\r\n          <div id='CustomiserNavActions'></div>\r\n        </div>\r\n      )}\r\n    </motion.nav>\r\n  );\r\n};\r\n\r\nexport default CustomiserNav;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}