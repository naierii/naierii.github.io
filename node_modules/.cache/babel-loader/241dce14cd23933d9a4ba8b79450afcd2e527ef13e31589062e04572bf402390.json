{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Reian\\\\Desktop\\\\Work\\\\Freelance\\\\Boxxer World\\\\boxxerworld-shopify-frontend\\\\customiser\\\\src\\\\components\\\\layout\\\\Main\\\\Main.tsx\",\n  _s = $RefreshSig$();\nimport Button from '@components/ui/Button';\nimport { useGetCustomProductByShopifyIdQuery } from '@graphql/generated/graphql';\nimport { useShopifyGetProductByIdQuery } from '@graphql/generated/graphql-shopify';\nimport { useCustomiserStore } from '@store/customiser';\nimport { lazy, Suspense, useEffect } from 'react';\nimport { ErrorBoundary } from 'react-error-boundary';\nimport { graphQLClient } from '@graphql/graphql-client';\nimport { useDesignStore } from '@store/design';\nimport { disableBodyScroll, enableBodyScroll, clearAllBodyScrollLocks } from 'body-scroll-lock';\nimport styles from './Main.module.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Customiser = /*#__PURE__*/lazy(_c = () => import('@components/layout/Customiser'));\n_c2 = Customiser;\nfunction ErrorFallback({\n  error,\n  resetErrorBoundary\n}) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.error,\n    role: \"alert\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Something went wrong:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n      children: error.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      onClick: resetErrorBoundary,\n      children: \"Try again\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 22,\n    columnNumber: 5\n  }, this);\n}\n_c3 = ErrorFallback;\nconst Main = ({\n  product\n}) => {\n  _s();\n  const {\n    show,\n    setShow\n  } = useDesignStore(state => state);\n  const setCustomProduct = useCustomiserStore(state => state.setCustomProduct);\n  const reset = useCustomiserStore(state => state.reset);\n  const {\n    data: customProduct\n  } = useGetCustomProductByShopifyIdQuery(graphQLClient, {\n    id: product\n  }, {\n    select: data => {\n      var _data$customProductBy;\n      return (_data$customProductBy = data.customProductByShopifyId) === null || _data$customProductBy === void 0 ? void 0 : _data$customProductBy.data;\n    }\n  });\n  const {\n    data: shopifyProduct\n  } = useShopifyGetProductByIdQuery({\n    id: product\n  });\n  useEffect(() => {\n    const target = document.querySelector('#scrollable');\n    if (show && target) {\n      disableBodyScroll(target);\n    } else if (target) {\n      enableBodyScroll(target);\n    }\n    return () => {\n      clearAllBodyScrollLocks();\n    };\n  }, [show]);\n  useEffect(() => {\n    var _customProduct$attrib, _customProduct$attrib2;\n    async function rehydrate() {\n      await useCustomiserStore.persist.rehydrate();\n    }\n    rehydrate();\n    customProduct === null || customProduct === void 0 ? void 0 : (_customProduct$attrib = customProduct.attributes) === null || _customProduct$attrib === void 0 ? void 0 : (_customProduct$attrib2 = _customProduct$attrib.options) === null || _customProduct$attrib2 === void 0 ? void 0 : _customProduct$attrib2.splice(0, 1);\n    // .find(option => option?.name === 'Waist')\n    console.log('customProduct', customProduct);\n    if (customProduct && shopifyProduct) {\n      setCustomProduct(customProduct, shopifyProduct);\n    }\n  }, [customProduct, shopifyProduct]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: show ? /*#__PURE__*/_jsxDEV(Suspense, {\n      fallback: /*#__PURE__*/_jsxDEV(Button, {\n        colour: \"red\",\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 29\n      }, this),\n      children: /*#__PURE__*/_jsxDEV(ErrorBoundary, {\n        FallbackComponent: ErrorFallback,\n        onReset: () => {\n          reset();\n        },\n        children: /*#__PURE__*/_jsxDEV(Customiser, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Button, {\n      colour: \"red\",\n      onClick: () => setShow(true),\n      children: \"Customise\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n};\n_s(Main, \"eEp9jDQ1h8W8ZKbJxxmbi3YeK18=\", false, function () {\n  return [useDesignStore, useCustomiserStore, useCustomiserStore, useGetCustomProductByShopifyIdQuery, useShopifyGetProductByIdQuery];\n});\n_c4 = Main;\nexport default Main;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"Customiser$lazy\");\n$RefreshReg$(_c2, \"Customiser\");\n$RefreshReg$(_c3, \"ErrorFallback\");\n$RefreshReg$(_c4, \"Main\");","map":{"version":3,"names":["Button","useGetCustomProductByShopifyIdQuery","useShopifyGetProductByIdQuery","useCustomiserStore","lazy","Suspense","useEffect","ErrorBoundary","graphQLClient","useDesignStore","disableBodyScroll","enableBodyScroll","clearAllBodyScrollLocks","styles","jsxDEV","_jsxDEV","Fragment","_Fragment","Customiser","_c","_c2","ErrorFallback","error","resetErrorBoundary","className","role","children","fileName","_jsxFileName","lineNumber","columnNumber","message","onClick","_c3","Main","product","_s","show","setShow","state","setCustomProduct","reset","data","customProduct","id","select","_data$customProductBy","customProductByShopifyId","shopifyProduct","target","document","querySelector","_customProduct$attrib","_customProduct$attrib2","rehydrate","persist","attributes","options","splice","console","log","fallback","colour","FallbackComponent","onReset","_c4","$RefreshReg$"],"sources":["C:/Users/Reian/Desktop/Work/Freelance/Boxxer World/boxxerworld-shopify-frontend/customiser/src/components/layout/Main/Main.tsx"],"sourcesContent":["import Button from '@components/ui/Button';\r\nimport { useGetCustomProductByShopifyIdQuery } from '@graphql/generated/graphql';\r\nimport { useShopifyGetProductByIdQuery } from '@graphql/generated/graphql-shopify';\r\nimport { useCustomiserStore } from '@store/customiser';\r\nimport { lazy, Suspense, useEffect } from 'react';\r\nimport { ErrorBoundary } from 'react-error-boundary';\r\nimport { graphQLClient } from '@graphql/graphql-client';\r\nimport { useDesignStore } from '@store/design';\r\nimport { disableBodyScroll, enableBodyScroll, clearAllBodyScrollLocks } from 'body-scroll-lock';\r\n\r\nimport styles from './Main.module.scss';\r\n\r\nconst Customiser = lazy(() => import('@components/layout/Customiser'));\r\n\r\ninterface ErrorFallbackProps {\r\n  error: Error;\r\n  resetErrorBoundary: (event: React.MouseEvent<HTMLButtonElement>) => void;\r\n}\r\n\r\nfunction ErrorFallback({ error, resetErrorBoundary }: ErrorFallbackProps) {\r\n  return (\r\n    <div className={styles.error} role='alert'>\r\n      <h2>Something went wrong:</h2>\r\n      <pre>{error.message}</pre>\r\n      <Button onClick={resetErrorBoundary}>Try again</Button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport interface MainProps {\r\n  product: string;\r\n}\r\n\r\nconst Main = ({ product }: MainProps) => {\r\n  const { show, setShow } = useDesignStore((state) => state);\r\n  const setCustomProduct = useCustomiserStore((state) => state.setCustomProduct);\r\n  const reset = useCustomiserStore((state) => state.reset);\r\n\r\n  const { data: customProduct } = useGetCustomProductByShopifyIdQuery(\r\n    graphQLClient,\r\n    { id: product },\r\n    { select: (data) => data.customProductByShopifyId?.data },\r\n  );\r\n\r\n  const { data: shopifyProduct } = useShopifyGetProductByIdQuery({\r\n    id: product,\r\n  });\r\n\r\n  useEffect(() => {\r\n    const target = document.querySelector('#scrollable') as Element;\r\n    if (show && target) {\r\n      disableBodyScroll(target);\r\n    } else if (target) {\r\n      enableBodyScroll(target);\r\n    }\r\n\r\n    return () => {\r\n      clearAllBodyScrollLocks();\r\n    };\r\n  }, [show]);\r\n\r\n  useEffect(() => {\r\n    async function rehydrate() {\r\n      await useCustomiserStore.persist.rehydrate();\r\n    }\r\n    rehydrate();\r\n    customProduct?.attributes?.options?.splice(0, 1);\r\n    // .find(option => option?.name === 'Waist')\r\n    console.log('customProduct', customProduct);\r\n    if (customProduct && shopifyProduct) {\r\n      setCustomProduct(customProduct, shopifyProduct);\r\n    }\r\n  }, [customProduct, shopifyProduct]);\r\n\r\n  return (\r\n    <>\r\n      {show ? (\r\n        <Suspense fallback={<Button colour='red'>Loading...</Button>}>\r\n          <ErrorBoundary\r\n            FallbackComponent={ErrorFallback}\r\n            onReset={() => {\r\n              reset();\r\n            }}\r\n          >\r\n            <Customiser />\r\n          </ErrorBoundary>\r\n        </Suspense>\r\n      ) : (\r\n        <Button colour='red' onClick={() => setShow(true)}>\r\n          Customise\r\n        </Button>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Main;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}