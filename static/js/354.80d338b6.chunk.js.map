{"version":3,"file":"static/js/354.80d338b6.chunk.js","mappings":"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","sources":["lib/shopify.ts","components/three/Lights/Lights.tsx","components/three/Loadable/Loadable.tsx","components/three/MouseHelper/MouseHelper.tsx","webpack://boxxerworld-customiser/./src/components/three/CustomiserCanvas/CustomiserCanvas.module.scss?7972","components/three/CustomiserCanvas/CustomiserCanvas.tsx"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\r\nexport const addToCart = async (data: any) => {\r\n  return fetch(window.Shopify.routes.root + 'cart/add.js', {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify(data),\r\n  });\r\n};\r\n","import { SpotLight, useHelper } from '@react-three/drei';\r\nimport { useRef } from 'react';\r\nimport { SpotLightHelper, Vector3, SpotLight as SpotLightRef } from 'three';\r\nconst config = {\r\n  ambientLight: {\r\n    // color: 16777215,\r\n    // groundColor: 4473924,\r\n    intensity: 0.1,\r\n  },\r\n  directionalLights: [\r\n    {\r\n      color: 16777215,\r\n      intensity: 0.3,\r\n      position: new Vector3(0, 6, -200),\r\n      castShadow: true,\r\n    },\r\n    {\r\n      color: 16759931,\r\n      intensity: 0.2,\r\n      position: new Vector3(-150, 0, 200),\r\n      castShadow: true,\r\n    },\r\n    {\r\n      color: 10213119,\r\n      intensity: 0.2,\r\n      position: new Vector3(100, 0, 200),\r\n    },\r\n  ],\r\n};\r\n\r\nconst Lights = () => {\r\n  const light = useRef<SpotLightRef>(null);\r\n  // useHelper(light.current, SpotLightHelper, 'cyan');\r\n  return (\r\n    <group>\r\n      <hemisphereLight {...config.ambientLight}></hemisphereLight>\r\n      <pointLight position={[-800, 0, -1000]} intensity={0.5} decay={12} power={7} castShadow />\r\n      <pointLight position={[-800, 0, 1000]} intensity={0.5} decay={12} power={7} castShadow />\r\n      <pointLight position={[800, 0, 1000]} intensity={0.5} decay={120} power={7} castShadow />\r\n      <pointLight position={[800, 0, -1000]} intensity={0.5} decay={12} power={7} castShadow />\r\n    </group>\r\n  );\r\n};\r\n\r\nexport default Lights;\r\n","/* eslint-disable react/display-name */\r\nimport { FC, Suspense, forwardRef } from 'react';\r\n\r\nexport interface LoadableProps {\r\n  className?: string;\r\n}\r\n\r\n// eslint-disable-next-line react/display-name, @typescript-eslint/no-explicit-any\r\nconst Loadable = (Component: FC<any>) =>\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  forwardRef((props: any, ref) => (\r\n    <Suspense fallback={<></>}>\r\n      <Component {...props} ref={ref} />\r\n    </Suspense>\r\n  ));\r\n\r\nexport default Loadable;\r\n","import { ThreeElements, Vector3 } from '@react-three/fiber';\r\nimport { forwardRef } from 'react';\r\nimport { Mesh } from 'three';\r\n\r\nexport interface MouseHelperProps {\r\n  position?: Vector3;\r\n}\r\n\r\nconst MouseHelper = forwardRef<Mesh, MouseHelperProps>((props, ref) => {\r\n  const BoxProps: ThreeElements['boxGeometry'] = {\r\n    args: [1, 1, 200],\r\n  };\r\n\r\n  return (\r\n    <mesh ref={ref} visible={false} scale={0.1}>\r\n      <boxGeometry {...BoxProps} />\r\n      <meshNormalMaterial />\r\n    </mesh>\r\n  );\r\n});\r\n\r\nMouseHelper.displayName = 'MouseHelper';\r\n\r\nexport default MouseHelper;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"CustomiserCanvas_root__1vMOn\",\"save\":\"CustomiserCanvas_save__V9j3S\"};","import { OrbitControls } from '@react-three/drei';\r\nimport { Canvas, ThreeEvent } from '@react-three/fiber';\r\nimport cn from 'classnames';\r\nimport { CSSProperties, lazy, useCallback, useEffect, useMemo, useRef, useState } from 'react';\r\n\r\nimport {\r\n  CustomDesignEntity,\r\n  CustomDesignInput,\r\n  Maybe,\r\n  useCreateCustomDesignMutation,\r\n  useUploadMultipleFilesMutation,\r\n} from '@graphql/generated/graphql';\r\nimport { graphQLClient } from '@graphql/graphql-client';\r\nimport { addToCart } from '@lib/shopify';\r\nimport { CustomiserState, useCustomiserStore } from '@store/customiser';\r\nimport { useDesignStore } from '@store/design';\r\nimport { useMutation } from '@tanstack/react-query';\r\nimport { Camera, Euler, Group, Mesh, Vector3 } from 'three';\r\n\r\nimport Lights from '../Lights';\r\nimport Loadable from '../Loadable';\r\nimport MouseHelper from '../MouseHelper';\r\nimport { SceneProps } from '../Scene/Scene';\r\nimport styles from './CustomiserCanvas.module.scss';\r\n\r\nimport ThreeScene from '@components/three/Scene';\r\n\r\nconst Scene = Loadable(lazy(() => import('@components/three/Scene'))) as typeof ThreeScene;\r\n\r\nexport interface CustomiserCanvasProps {\r\n  className?: string;\r\n  style?: CSSProperties;\r\n  onCameraRef: (ref: Camera | null) => void;\r\n}\r\n\r\nconst getCustomDesignData = (state: CustomiserState, files: string[]): CustomDesignInput => ({\r\n  customProduct: state.customProduct?.id,\r\n  parts: state.savedParts.map((p) => ({\r\n    name: p.part.name,\r\n    areaSize: p.part.areaSize?.data?.id,\r\n    material: p.material.id,\r\n  })),\r\n  texts: state.texts.map((t) => ({\r\n    text: t.text,\r\n    decalPosition: t.decalPosition,\r\n    decalOrientation: t.decalOrientation,\r\n    decalRotation: t.decalRotation,\r\n    decalScale: t.decalScale,\r\n    basePriceVariantId: t.basePrice?.shopifyVariantId,\r\n    letterPriceVariantId: t.letterPrice?.shopifyVariantId,\r\n    outlinePriceVariantId: t.outlinePrice?.shopifyVariantId,\r\n    puffPriceVariantId: t.puffPrice?.shopifyVariantId,\r\n    crystalPriceVariantId: t.crystalPrice?.shopifyVariantId,\r\n  })),\r\n  flags: state.flags.map((f) => ({\r\n    flag: f.flag?.id,\r\n    decalPosition: f.decalPosition,\r\n    decalOrientation: f.decalOrientation,\r\n    decalRotation: f.decalRotation,\r\n    decalScale: f.decalScale,\r\n    size: f.size,\r\n    shopifyVariantId: f.basePrice?.shopifyVariantId,\r\n  })),\r\n  graphics: state.graphics.map((g) => ({\r\n    graphic: g.graphic?.id,\r\n    decalPosition: g.decalPosition,\r\n    decalOrientation: g.decalOrientation,\r\n    decalRotation: g.decalRotation,\r\n    decalScale: g.decalScale,\r\n    size: g.size,\r\n    shopifyVariantId: g.basePrice?.shopifyVariantId,\r\n  })),\r\n  images: files,\r\n  sizing: {\r\n    shopifyVariantId: state.sizing?.variation?.id,\r\n    size: state.sizing?.size,\r\n    height: state.sizing?.height?.value?.toString(),\r\n    heightUnit: state.sizing?.height?.unit,\r\n    weight: state.sizing?.weight?.value,\r\n    weightUnit: state.sizing?.weight?.unit,\r\n  },\r\n});\r\n\r\nconst getCartVariations = (customDesignEntity?: CustomDesignEntity) => {\r\n  const customDesignId = customDesignEntity?.id;\r\n  const customDesign = customDesignEntity?.attributes;\r\n\r\n  if (!customDesign || !customDesignId) {\r\n    return [];\r\n  }\r\n\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  const items: Array<{ id?: string; quantity: number; properties: any }> = [];\r\n  const id = (id?: Maybe<string>) => id?.replace('gid://shopify/ProductVariant/', '');\r\n  const getItem = (id?: string) => items.find((i) => i.id === id);\r\n  const addOrUpdate = (variantId: string, addQty = 1) => {\r\n    const checkItem = getItem(variantId);\r\n    if (checkItem) {\r\n      const newQuantity = checkItem.quantity + addQty;\r\n      checkItem.quantity = newQuantity;\r\n      checkItem.properties._customDesignQuantity = newQuantity;\r\n    } else {\r\n      items.push({\r\n        id: variantId,\r\n        quantity: addQty,\r\n        properties: {\r\n          _customDesignAddon: customDesignId,\r\n          _customDesignQuantity: addQty,\r\n        },\r\n      });\r\n    }\r\n  };\r\n\r\n  if (customDesign.parts?.length) {\r\n    customDesign.parts.forEach((p) => {\r\n      const variantId = id(p?.shopifyVariantId);\r\n      if (variantId) addOrUpdate(variantId);\r\n    });\r\n  }\r\n\r\n  if (customDesign.flags?.length) {\r\n    customDesign.flags.forEach((p) => {\r\n      const variantId = id(p?.shopifyVariantId);\r\n      if (variantId) addOrUpdate(variantId);\r\n    });\r\n  }\r\n\r\n  if (customDesign.graphics?.length) {\r\n    customDesign.graphics.forEach((p) => {\r\n      const variantId = id(p?.shopifyVariantId);\r\n      if (variantId) addOrUpdate(variantId);\r\n    });\r\n  }\r\n\r\n  if (customDesign.texts?.length) {\r\n    customDesign.texts.forEach((t) => {\r\n      const basePrice = id(t?.basePriceVariantId);\r\n      if (basePrice) addOrUpdate(basePrice);\r\n      const letterPrice = id(t?.letterPriceVariantId);\r\n      if (letterPrice) addOrUpdate(letterPrice, t?.text?.length);\r\n      const outlinePrice = id(t?.outlinePriceVariantId);\r\n      if (outlinePrice) addOrUpdate(outlinePrice);\r\n      const puffPrice = id(t?.puffPriceVariantId);\r\n      if (puffPrice) addOrUpdate(puffPrice);\r\n      const crystalPrice = id(t?.crystalPriceVariantId);\r\n      if (crystalPrice) addOrUpdate(crystalPrice);\r\n    });\r\n  }\r\n\r\n  if (customDesign.sizing?.shopifyVariantId) {\r\n    items.push({\r\n      id: id(customDesign.sizing.shopifyVariantId),\r\n      quantity: 1,\r\n      properties: {\r\n        _customDesign: customDesignId,\r\n      },\r\n    });\r\n  }\r\n\r\n  return items;\r\n};\r\n\r\nexport const cameraDefault: [x: number, y: number, z: number] = [\r\n  0, 2.1970893240496195e-15, 15.31024512625285,\r\n];\r\nconst cameraLegCutPosition: [x: number, y: number, z: number] = [\r\n  -9.185152813837497, -0.027208324675620475, 5.472202579336368,\r\n];\r\n\r\nconst CustomiserCanvas = ({\r\n  className,\r\n  style,\r\n  onCameraRef,\r\n}: CustomiserCanvasProps): JSX.Element => {\r\n  const cameraRef = useRef<Camera | null>(null);\r\n  const canvasRef = useRef<HTMLCanvasElement>(null);\r\n  const images = useRef<File[]>([]);\r\n  const positionRef = useRef<Vector3>(new Vector3());\r\n  const orientationRef = useRef<Euler>(new Euler());\r\n  const groupRef = useRef<Group>(null);\r\n  const editFlag = useCustomiserStore((state) => state.flags.find((f) => f.edit));\r\n  const editText = useCustomiserStore((state) => state.texts.find((f) => f.edit));\r\n  const editGraphic = useCustomiserStore((state) => state.graphics.find((f) => f.edit));\r\n  const updateGraphic = useCustomiserStore((state) => state.updateGraphic);\r\n  const updateFlag = useCustomiserStore((state) => state.updateFlag);\r\n  const updateText = useCustomiserStore((state) => state.updateText);\r\n  const setCanvasSize = useCustomiserStore((state) => state.setCanvasSize);\r\n  const resetCamera = useDesignStore((state) => state.resetCamera);\r\n  const addingToCart = useDesignStore((state) => state.addingToCart);\r\n  const modelRotation = useDesignStore((state) => state.modelRotation);\r\n  const setAddingToCart = useDesignStore((state) => state.setAddingToCart);\r\n  const setModelRotation = useDesignStore((state) => state.setModelRotation);\r\n  const reset = useCustomiserStore((state) => state.reset);\r\n  const cameraFocus = useCustomiserStore((state) => state.cameraFocus);\r\n  const rootClassName = cn(styles.root, className);\r\n  const mouseHelperRef = useRef<Mesh>(null);\r\n  const state = useCustomiserStore((state) => state);\r\n\r\n  const [isPointerDown, setIsPointerDown] = useState(false);\r\n  const [isPointerMoved, setIsPointerMoved] = useState(false);\r\n\r\n  const setPosition = useCallback(\r\n    (event: ThreeEvent<MouseEvent>) => {\r\n      const p = event.point;\r\n      const n = event?.face?.normal.clone();\r\n      if (mouseHelperRef.current && n && groupRef.current) {\r\n        n.transformDirection(groupRef.current.matrixWorld);\r\n        n.multiplyScalar(10);\r\n        n.add(p);\r\n        mouseHelperRef.current.position.copy(p);\r\n        mouseHelperRef.current.lookAt(n);\r\n      }\r\n    },\r\n    [mouseHelperRef],\r\n  );\r\n\r\n  const onClick = useCallback<Required<SceneProps>['onClick']>(\r\n    (event) => {\r\n      setIsPointerDown(false);\r\n      setIsPointerMoved(false);\r\n\r\n      if (!isPointerDown || isPointerMoved) {\r\n        return;\r\n      }\r\n\r\n      if (editFlag?.key) {\r\n        event.stopPropagation();\r\n\r\n        updateFlag(editFlag.key, { decalFreeze: true });\r\n        setPosition(event);\r\n        if (mouseHelperRef.current && positionRef.current && orientationRef.current) {\r\n          positionRef.current.copy(event.point);\r\n          orientationRef.current.copy(mouseHelperRef.current.rotation);\r\n          updateFlag(editFlag.key, {\r\n            decalPosition: positionRef.current.clone().toArray(),\r\n            decalOrientation: orientationRef.current.clone().toArray(),\r\n          });\r\n        }\r\n      }\r\n\r\n      if (editGraphic?.key) {\r\n        event.stopPropagation();\r\n\r\n        updateGraphic(editGraphic.key, { decalFreeze: true });\r\n        setPosition(event);\r\n        if (mouseHelperRef.current && positionRef.current && orientationRef.current) {\r\n          positionRef.current.copy(event.point);\r\n          orientationRef.current.copy(mouseHelperRef.current.rotation);\r\n          updateGraphic(editGraphic.key, {\r\n            decalPosition: positionRef.current.clone().toArray(),\r\n            decalOrientation: orientationRef.current.clone().toArray(),\r\n          });\r\n        }\r\n      }\r\n\r\n      if (editText?.key) {\r\n        event.stopPropagation();\r\n        updateText(editText.key, { decalFreeze: true });\r\n        setPosition(event);\r\n        if (mouseHelperRef.current && positionRef.current && orientationRef.current) {\r\n          positionRef.current.copy(event.point);\r\n          orientationRef.current.copy(mouseHelperRef.current.rotation);\r\n          updateText(editText.key, {\r\n            decalPosition: positionRef.current.clone().toArray(),\r\n            decalOrientation: orientationRef.current.clone().toArray(),\r\n          });\r\n        }\r\n      }\r\n    },\r\n    [editFlag, editGraphic, editText, isPointerDown, isPointerMoved],\r\n  );\r\n\r\n  const onPointerDown = useCallback<Required<SceneProps>['onPointerDown']>(() => {\r\n    setIsPointerDown(true);\r\n  }, []);\r\n\r\n  const onPointerMove = useCallback<Required<SceneProps>['onPointerMove']>(\r\n    (e) => {\r\n      setIsPointerDown((cur) => {\r\n        if (cur) {\r\n          setIsPointerMoved(true);\r\n        }\r\n        return cur;\r\n      });\r\n    },\r\n    [isPointerDown],\r\n  );\r\n\r\n  const shopifyAddToCart = useMutation({\r\n    mutationFn: addToCart,\r\n    onSuccess: () => {\r\n      window.location.href = window.Shopify.routes.root + 'cart';\r\n      reset();\r\n    },\r\n  });\r\n\r\n  const { mutate } = useCreateCustomDesignMutation(graphQLClient, {\r\n    onSuccess(data) {\r\n      if (data.createCustomDesign?.data) {\r\n        const items = getCartVariations(data.createCustomDesign.data);\r\n        shopifyAddToCart.mutate({ items: items });\r\n      }\r\n    },\r\n  });\r\n\r\n  const { mutateAsync } = useUploadMultipleFilesMutation(graphQLClient, {\r\n    onSuccess(data) {\r\n      const fileIDs = data.multipleUpload.map((f) => f?.data?.id) as string[];\r\n      mutate({ data: getCustomDesignData(state, fileIDs) });\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (addingToCart && modelRotation < 360) {\r\n      setTimeout(() => {\r\n        canvasRef?.current?.toBlob((blob) => {\r\n          if (blob) {\r\n            const file = new File([blob], 'fileName.png', { type: 'image/png' });\r\n            images.current.push(file);\r\n            setModelRotation(modelRotation + 90);\r\n          }\r\n        }, 'image/png');\r\n      }, 50);\r\n    } else if (addingToCart) {\r\n      const upload = async () => {\r\n        await mutateAsync({ files: images.current });\r\n      };\r\n      upload();\r\n    }\r\n  }, [modelRotation, addingToCart, images]);\r\n\r\n  useEffect(() => {\r\n    const camera = cameraRef.current;\r\n    if (!camera) {\r\n      return;\r\n    }\r\n    if (resetCamera) {\r\n      camera.position.set(cameraDefault[0], cameraDefault[1], cameraDefault[2]);\r\n      setAddingToCart();\r\n    }\r\n  }, [resetCamera]);\r\n\r\n  useEffect(() => {\r\n    if (onCameraRef && cameraRef.current) {\r\n      onCameraRef(cameraRef.current);\r\n    }\r\n  }, [onCameraRef]);\r\n\r\n  const cameraFocusHandler = () => {\r\n    switch (cameraFocus.toLowerCase()) {\r\n      case 'leg cut':\r\n        return cameraLegCutPosition;\r\n      default:\r\n        return cameraDefault;\r\n    }\r\n  };\r\n\r\n  const modelDataIds = useMemo(\r\n    () => state.selectedModels.map((m) => m.model?.id),\r\n    [state.selectedModels],\r\n  );\r\n\r\n  // eslint-disable-next-line\r\n  // @ts-ignore\r\n  window.myTest = () => {\r\n    const camera = cameraRef.current;\r\n    console.log('camera', camera?.position);\r\n  };\r\n  useEffect(() => {\r\n    const focusCamera = (coordinates: number[]) => {\r\n      const camera = cameraRef.current;\r\n      console.log('camera', camera);\r\n      if (camera) {\r\n        camera.position.set(coordinates[0], coordinates[1], coordinates[2]);\r\n      }\r\n    };\r\n    switch (cameraFocus.toLowerCase()) {\r\n      case 'leg cut':\r\n        focusCamera(cameraLegCutPosition);\r\n        break;\r\n      default:\r\n        focusCamera(cameraDefault);\r\n        break;\r\n    }\r\n  }, [cameraFocus, modelDataIds]);\r\n\r\n  const isEditing = editFlag || editGraphic || editText;\r\n\r\n  return (\r\n    <div className={rootClassName} style={style}>\r\n      <Canvas\r\n        linear\r\n        flat\r\n        camera={{\r\n          position: cameraFocusHandler(),\r\n          fov: 45,\r\n        }}\r\n        dpr={window.devicePixelRatio}\r\n        gl={{ preserveDrawingBuffer: true }}\r\n        ref={canvasRef}\r\n        onCreated={(state) => {\r\n          setCanvasSize(state.size.width, state.size.height);\r\n          cameraRef.current = state.camera;\r\n        }}\r\n        frameloop='demand'\r\n      >\r\n        <Scene\r\n          onClick={onClick}\r\n          onPointerDown={onPointerDown}\r\n          onPointerMove={onPointerMove}\r\n          ref={groupRef}\r\n        />\r\n        <Lights />\r\n        {isEditing && <MouseHelper ref={mouseHelperRef} />}\r\n        <OrbitControls\r\n          enableZoom={true}\r\n          maxDistance={50}\r\n          minDistance={5}\r\n          minPolarAngle={Math.PI / 3}\r\n          maxPolarAngle={Math.PI / 1.9}\r\n          enableDamping={false}\r\n        />\r\n      </Canvas>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CustomiserCanvas;\r\n"],"names":["addToCart","async","fetch","window","Shopify","routes","root","method","headers","body","JSON","stringify","data","config","intensity","Vector3","Lights","useRef","_jsxs","children","_jsx","position","decay","power","castShadow","Component","forwardRef","props","ref","Suspense","fallback","_Fragment","MouseHelper","visible","scale","args","displayName","Scene","Loadable","lazy","getCustomDesignData","state","files","_state$customProduct","_state$sizing","_state$sizing$variati","_state$sizing2","_state$sizing3","_state$sizing3$height","_state$sizing3$height2","_state$sizing4","_state$sizing4$height","_state$sizing5","_state$sizing5$weight","_state$sizing6","_state$sizing6$weight","customProduct","id","parts","savedParts","map","p","_p$part$areaSize","_p$part$areaSize$data","name","part","areaSize","material","texts","t","_t$basePrice","_t$letterPrice","_t$outlinePrice","_t$puffPrice","_t$crystalPrice","text","decalPosition","decalOrientation","decalRotation","decalScale","basePriceVariantId","basePrice","shopifyVariantId","letterPriceVariantId","letterPrice","outlinePriceVariantId","outlinePrice","puffPriceVariantId","puffPrice","crystalPriceVariantId","crystalPrice","flags","f","_f$flag","_f$basePrice","flag","size","graphics","g","_g$graphic","_g$basePrice","graphic","images","sizing","variation","height","value","toString","heightUnit","unit","weight","weightUnit","getCartVariations","customDesignEntity","_customDesign$parts","_customDesign$flags","_customDesign$graphic","_customDesign$texts","_customDesign$sizing","customDesignId","customDesign","attributes","items","replace","addOrUpdate","variantId","addQty","arguments","length","undefined","checkItem","find","i","getItem","newQuantity","quantity","properties","_customDesignQuantity","push","_customDesignAddon","forEach","_t$text","_customDesign","cameraDefault","cameraLegCutPosition","_ref","className","style","onCameraRef","cameraRef","canvasRef","positionRef","orientationRef","Euler","groupRef","editFlag","useCustomiserStore","edit","editText","editGraphic","updateGraphic","updateFlag","updateText","setCanvasSize","resetCamera","useDesignStore","addingToCart","modelRotation","setAddingToCart","setModelRotation","reset","cameraFocus","rootClassName","cn","styles","mouseHelperRef","isPointerDown","setIsPointerDown","useState","isPointerMoved","setIsPointerMoved","setPosition","useCallback","event","_event$face","point","n","face","normal","clone","current","transformDirection","matrixWorld","multiplyScalar","add","copy","lookAt","onClick","key","stopPropagation","decalFreeze","rotation","toArray","onPointerDown","onPointerMove","e","cur","shopifyAddToCart","useMutation","mutationFn","onSuccess","location","href","mutate","useCreateCustomDesignMutation","graphQLClient","_data$createCustomDes","createCustomDesign","mutateAsync","useUploadMultipleFilesMutation","fileIDs","multipleUpload","_f$data","useEffect","setTimeout","_canvasRef$current","toBlob","blob","file","File","type","upload","camera","set","modelDataIds","useMemo","selectedModels","m","_m$model","model","myTest","console","log","focusCamera","coordinates","toLowerCase","isEditing","Canvas","linear","flat","fov","dpr","devicePixelRatio","gl","preserveDrawingBuffer","onCreated","width","frameloop","OrbitControls","enableZoom","maxDistance","minDistance","minPolarAngle","Math","PI","maxPolarAngle","enableDamping"],"sourceRoot":""}