{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Reian\\\\Desktop\\\\Work\\\\Freelance\\\\Boxxer World\\\\boxxerworld-shopify-frontend\\\\customiser\\\\src\\\\components\\\\nav\\\\NavFlags\\\\NavFlags.tsx\",\n  _s = $RefreshSig$();\nimport { startTransition, useState } from 'react';\nimport { NavFlagsSelect } from './NavFlagsSelect';\nimport Button from '@components/ui/Button';\nimport { useCustomiserStore } from '@store/customiser';\nimport NavButtons from '../NavButtons';\nimport NavDecalAdjust from '../NavDecalAdjust';\nimport NavEditButtons from '../NavEditButtons';\nimport styles from './NavFlags.module.scss';\nimport { NavFlagsFlag } from './NavFlagsFlag';\nimport { useGetFlagsQuery } from '@graphql/generated/graphql';\nimport { graphQLClient } from '@graphql/graphql-client';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst NavFlags = () => {\n  _s();\n  const flags = useCustomiserStore(state => state.flags);\n  const updateFlag = useCustomiserStore(state => state.updateFlag);\n  const editFlag = flags === null || flags === void 0 ? void 0 : flags.find(g => g.edit);\n  const [showSelector, setShowSelector] = useState(false);\n  const {\n    data: flagQuery\n  } = useGetFlagsQuery(graphQLClient, {\n    pagination: {\n      limit: 500\n    }\n  }, {\n    select: data => {\n      var _data$flags, _data$graphicPrices;\n      return {\n        flags: (_data$flags = data.flags) === null || _data$flags === void 0 ? void 0 : _data$flags.data,\n        prices: (_data$graphicPrices = data.graphicPrices) === null || _data$graphicPrices === void 0 ? void 0 : _data$graphicPrices.data\n      };\n    }\n  });\n  const addFlag = () => {\n    setShowSelector(true);\n  };\n  const setScale = (event, price) => {\n    var _price$attributes, _price$attributes2;\n    const priceValues = price !== null && price !== void 0 && (_price$attributes = price.attributes) !== null && _price$attributes !== void 0 && _price$attributes.size && price !== null && price !== void 0 && (_price$attributes2 = price.attributes) !== null && _price$attributes2 !== void 0 && _price$attributes2.basePrice ? {\n      size: price.attributes.size,\n      basePrice: {\n        ...price.attributes.basePrice,\n        quantity: 1\n      }\n    } : {};\n    if (editFlag !== null && editFlag !== void 0 && editFlag.key) {\n      updateFlag(editFlag.key, {\n        decalScale: Number(event),\n        ...priceValues\n      });\n    }\n  };\n  const setRotation = event => {\n    startTransition(() => {\n      if (editFlag !== null && editFlag !== void 0 && editFlag.key) updateFlag(editFlag.key, {\n        decalRotation: Number(event)\n      });\n    });\n  };\n  const applyFlag = () => {\n    if (editFlag !== null && editFlag !== void 0 && editFlag.key) {\n      updateFlag(editFlag.key, {\n        decalFreeze: false,\n        edit: false\n      });\n    }\n    setShowSelector(false);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: showSelector ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(NavDecalAdjust, {\n        scale: editFlag === null || editFlag === void 0 ? void 0 : editFlag.decalScale,\n        rotation: editFlag === null || editFlag === void 0 ? void 0 : editFlag.decalRotation,\n        onScale: setScale,\n        onRotate: setRotation,\n        prices: flagQuery === null || flagQuery === void 0 ? void 0 : flagQuery.prices\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this), (flagQuery === null || flagQuery === void 0 ? void 0 : flagQuery.flags) && /*#__PURE__*/_jsxDEV(NavFlagsSelect, {\n        editFlag: editFlag,\n        flags: flagQuery.flags\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 32\n      }, this), /*#__PURE__*/_jsxDEV(NavEditButtons, {\n        disabled: !editFlag,\n        onApply: applyFlag\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.customiserFlags,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Your Flags\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this), flags === null || flags === void 0 ? void 0 : flags.map(flag => /*#__PURE__*/_jsxDEV(NavFlagsFlag, {\n          flag: flag,\n          setShowSelector: setShowSelector\n        }, flag.key, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 15\n        }, this)), /*#__PURE__*/_jsxDEV(Button, {\n          colour: \"red\",\n          onClick: addFlag,\n          children: \"Add Flag\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(NavButtons, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)\n  }, void 0, false);\n};\n_s(NavFlags, \"pDppfdeEY1IX2CBE7/BmqWuaSPo=\", false, function () {\n  return [useCustomiserStore, useCustomiserStore, useGetFlagsQuery];\n});\n_c = NavFlags;\nexport default NavFlags;\nvar _c;\n$RefreshReg$(_c, \"NavFlags\");","map":{"version":3,"names":["startTransition","useState","NavFlagsSelect","Button","useCustomiserStore","NavButtons","NavDecalAdjust","NavEditButtons","styles","NavFlagsFlag","useGetFlagsQuery","graphQLClient","jsxDEV","_jsxDEV","Fragment","_Fragment","NavFlags","_s","flags","state","updateFlag","editFlag","find","g","edit","showSelector","setShowSelector","data","flagQuery","pagination","limit","select","_data$flags","_data$graphicPrices","prices","graphicPrices","addFlag","setScale","event","price","_price$attributes","_price$attributes2","priceValues","attributes","size","basePrice","quantity","key","decalScale","Number","setRotation","decalRotation","applyFlag","decalFreeze","children","scale","rotation","onScale","onRotate","fileName","_jsxFileName","lineNumber","columnNumber","disabled","onApply","className","customiserFlags","map","flag","colour","onClick","_c","$RefreshReg$"],"sources":["C:/Users/Reian/Desktop/Work/Freelance/Boxxer World/boxxerworld-shopify-frontend/customiser/src/components/nav/NavFlags/NavFlags.tsx"],"sourcesContent":["import { startTransition, useState } from 'react';\r\nimport { NavFlagsSelect } from './NavFlagsSelect';\r\n\r\nimport Button from '@components/ui/Button';\r\nimport { useCustomiserStore } from '@store/customiser';\r\nimport NavButtons from '../NavButtons';\r\nimport NavDecalAdjust from '../NavDecalAdjust';\r\nimport NavEditButtons from '../NavEditButtons';\r\nimport styles from './NavFlags.module.scss';\r\nimport { NavFlagsFlag } from './NavFlagsFlag';\r\nimport { GraphicPriceEntity, useGetFlagsQuery } from '@graphql/generated/graphql';\r\nimport { graphQLClient } from '@graphql/graphql-client';\r\n\r\nconst NavFlags = () => {\r\n  const flags = useCustomiserStore((state) => state.flags);\r\n  const updateFlag = useCustomiserStore((state) => state.updateFlag);\r\n  const editFlag = flags?.find((g) => g.edit);\r\n\r\n  const [showSelector, setShowSelector] = useState(false);\r\n\r\n  const { data: flagQuery } = useGetFlagsQuery(\r\n    graphQLClient,\r\n    {\r\n      pagination: { limit: 500 },\r\n    },\r\n    {\r\n      select: (data) => ({ flags: data.flags?.data, prices: data.graphicPrices?.data }),\r\n    },\r\n  );\r\n\r\n  const addFlag = () => {\r\n    setShowSelector(true);\r\n  };\r\n\r\n  const setScale = (event: number, price?: GraphicPriceEntity) => {\r\n    const priceValues =\r\n      price?.attributes?.size && price?.attributes?.basePrice\r\n        ? {\r\n            size: price.attributes.size,\r\n            basePrice: {\r\n              ...price.attributes.basePrice,\r\n              quantity: 1,\r\n            },\r\n          }\r\n        : {};\r\n\r\n    if (editFlag?.key) {\r\n      updateFlag(editFlag.key, { decalScale: Number(event), ...priceValues });\r\n    }\r\n  };\r\n\r\n  const setRotation = (event: number) => {\r\n    startTransition(() => {\r\n      if (editFlag?.key) updateFlag(editFlag.key, { decalRotation: Number(event) });\r\n    });\r\n  };\r\n\r\n  const applyFlag = () => {\r\n    if (editFlag?.key) {\r\n      updateFlag(editFlag.key, {\r\n        decalFreeze: false,\r\n        edit: false,\r\n      });\r\n    }\r\n\r\n    setShowSelector(false);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {showSelector ? (\r\n        <>\r\n          <NavDecalAdjust\r\n            scale={editFlag?.decalScale}\r\n            rotation={editFlag?.decalRotation}\r\n            onScale={setScale}\r\n            onRotate={setRotation}\r\n            prices={flagQuery?.prices}\r\n          />\r\n          {flagQuery?.flags && <NavFlagsSelect editFlag={editFlag} flags={flagQuery.flags} />}\r\n          <NavEditButtons disabled={!editFlag} onApply={applyFlag} />\r\n        </>\r\n      ) : (\r\n        <>\r\n          <div className={styles.customiserFlags}>\r\n            <h3>Your Flags</h3>\r\n            {flags?.map((flag) => (\r\n              <NavFlagsFlag key={flag.key} flag={flag} setShowSelector={setShowSelector} />\r\n            ))}\r\n            <Button colour='red' onClick={addFlag}>\r\n              Add Flag\r\n            </Button>\r\n          </div>\r\n          <NavButtons />\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default NavFlags;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}