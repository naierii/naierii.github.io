{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Reian\\\\Desktop\\\\Work\\\\Freelance\\\\Boxxer World\\\\boxxerworld-shopify-frontend\\\\customiser\\\\src\\\\components\\\\three\\\\CustomiserMesh\\\\CustomiserMesh.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-nocheck\n\nimport { useTexture } from '@react-three/drei';\nimport { useCustomiserStore } from '@store/customiser';\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { Box3, DoubleSide, RepeatWrapping, Vector3 } from 'three';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ClonedTextureMesh = ({\n  node,\n  texture,\n  tasselsTexture,\n  tassels,\n  hex\n}) => {\n  _s();\n  const [textures, setTextures] = useState();\n  const materialRef = useRef(null);\n  const meshRef = useRef(null);\n  const [isPointerDown, setIsPointerDown] = useState(false);\n  const [isPointerMoved, setIsPointerMoved] = useState(false);\n  const clonedTextures = useMemo(() => Object.fromEntries(Object.entries(texture).map(([k, v]) => [k, v.clone()])), [texture]);\n  const {\n    navItems,\n    customProduct,\n    setSelectedNav,\n    texts,\n    updateText\n  } = useCustomiserStore();\n  const editText = useMemo(() => texts.find(t => t.edit), [texts]);\n  const part = useMemo(() => {\n    var _customProduct$attrib, _customProduct$attrib2;\n    return customProduct === null || customProduct === void 0 ? void 0 : (_customProduct$attrib = customProduct.attributes) === null || _customProduct$attrib === void 0 ? void 0 : (_customProduct$attrib2 = _customProduct$attrib.parts) === null || _customProduct$attrib2 === void 0 ? void 0 : _customProduct$attrib2.find(p => {\n      var _p$modelParts;\n      return p === null || p === void 0 ? void 0 : (_p$modelParts = p.modelParts) === null || _p$modelParts === void 0 ? void 0 : _p$modelParts.data.find(mp => {\n        var _mp$attributes, _mp$attributes2;\n        return ((_mp$attributes = mp.attributes) === null || _mp$attributes === void 0 ? void 0 : _mp$attributes.nodeId) === node.userData.name || ((_mp$attributes2 = mp.attributes) === null || _mp$attributes2 === void 0 ? void 0 : _mp$attributes2.nodeId) === node.name;\n      });\n    });\n  }, [customProduct, node]);\n  const navItem = useMemo(() => navItems.find(navItem => navItem.id === (part === null || part === void 0 ? void 0 : part.id)), [part, navItems]);\n  const navItemText = useMemo(() => navItems.find(navItem => navItem.type === 'names'), [navItems]);\n  useEffect(() => {\n    if (clonedTextures && meshRef.current) {\n      let updatedTextures = {};\n      for (const [key, clone] of Object.entries(clonedTextures)) {\n        clone.wrapS = clone.wrapT = RepeatWrapping;\n        const boundingBox = new Box3().setFromObject(meshRef.current);\n        const boxSize = new Vector3();\n        const dimensions = boundingBox.getSize(boxSize);\n        const area = dimensions.x * dimensions.y;\n        clone.repeat.set(0.0005 * area, 0.0005 * area);\n        updatedTextures = {\n          ...updatedTextures,\n          [key]: clone\n        };\n      }\n      if (Object.keys(part).length && part.name === 'Second Area') {\n        updatedTextures = {\n          roughnessMap: {\n            metadata: {\n              version: 4.5,\n              type: 'Texture',\n              generator: 'Texture.toJSON'\n            },\n            uuid: '7a26888a-da52-41b4-b18f-f3e79388431a',\n            name: '',\n            image: 'cb6b072e-121e-40ae-b127-f858a697e225',\n            mapping: 300,\n            repeat: [0.011443577143240135, 0.011443577143240135],\n            offset: [0, 0],\n            center: [0, 0],\n            rotation: 0,\n            wrap: [1000, 1000],\n            format: 1023,\n            type: 1009,\n            encoding: 3000,\n            minFilter: 1008,\n            magFilter: 1006,\n            anisotropy: 1,\n            flipY: true,\n            premultiplyAlpha: false,\n            unpackAlignment: 4\n          },\n          normalMap: {\n            metadata: {\n              version: 4.5,\n              type: 'Texture',\n              generator: 'Texture.toJSON'\n            },\n            uuid: 'a8384cce-87bc-43d2-8662-a71f7dac71f2',\n            name: '',\n            image: 'f84ee0c8-155c-45c3-bac0-14b071cb03ca',\n            mapping: 300,\n            repeat: [0.011443577143240135, 0.011443577143240135],\n            offset: [0, 0],\n            center: [0, 0],\n            rotation: 0,\n            wrap: [1000, 1000],\n            format: 1023,\n            type: 1009,\n            encoding: 3000,\n            minFilter: 1008,\n            magFilter: 1006,\n            anisotropy: 1,\n            flipY: true,\n            premultiplyAlpha: false,\n            unpackAlignment: 4\n          },\n          metalnessMap: {\n            metadata: {\n              version: 4.5,\n              type: 'Texture',\n              generator: 'Texture.toJSON'\n            },\n            uuid: '3ce5d6c1-0289-4c44-bcd9-431b5d8faef0',\n            name: '',\n            image: '2d845c89-dd87-4bd9-9c5b-a39efdd82039',\n            mapping: 300,\n            repeat: [0.011443577143240135, 0.011443577143240135],\n            offset: [0, 0],\n            center: [0, 0],\n            rotation: 0,\n            wrap: [1000, 1000],\n            format: 1023,\n            type: 1009,\n            encoding: 3000,\n            minFilter: 1008,\n            magFilter: 1006,\n            anisotropy: 1,\n            flipY: true,\n            premultiplyAlpha: false,\n            unpackAlignment: 4\n          },\n          displacementMap: {\n            metadata: {\n              version: 4.5,\n              type: 'Texture',\n              generator: 'Texture.toJSON'\n            },\n            uuid: '7995f575-83fd-4c6c-8011-f4d99e3cdefa',\n            name: '',\n            image: '01c9a9ad-a532-45ab-8fa9-1dc1fb33ad97',\n            mapping: 300,\n            repeat: [0.011443577143240135, 0.011443577143240135],\n            offset: [0, 0],\n            center: [0, 0],\n            rotation: 0,\n            wrap: [1000, 1000],\n            format: 1023,\n            type: 1009,\n            encoding: 3000,\n            minFilter: 1008,\n            magFilter: 1006,\n            anisotropy: 1,\n            flipY: true,\n            premultiplyAlpha: false,\n            unpackAlignment: 4\n          },\n          map: {\n            metadata: {\n              version: 4.5,\n              type: 'Texture',\n              generator: 'Texture.toJSON'\n            },\n            uuid: 'e7255d48-5148-4a54-86f6-5c5fc2ef8bea',\n            name: '',\n            image: 'a67972ac-9798-4c0d-bad3-f75cf5e6192b',\n            mapping: 300,\n            repeat: [0.011443577143240135, 0.011443577143240135],\n            offset: [0, 0],\n            center: [0, 0],\n            rotation: 0,\n            wrap: [1000, 1000],\n            format: 1023,\n            type: 1009,\n            encoding: 3000,\n            minFilter: 1008,\n            magFilter: 1006,\n            anisotropy: 1,\n            flipY: true,\n            premultiplyAlpha: false,\n            unpackAlignment: 4\n          },\n          aoMap: {\n            metadata: {\n              version: 4.5,\n              type: 'Texture',\n              generator: 'Texture.toJSON'\n            },\n            uuid: '9ea9cc0e-fb8c-48c0-83b6-d78cea7f7eb9',\n            name: '',\n            image: '9e292731-857c-4a24-b754-ec2e0206970b',\n            mapping: 300,\n            repeat: [0.011443577143240135, 0.011443577143240135],\n            offset: [0, 0],\n            center: [0, 0],\n            rotation: 0,\n            wrap: [1000, 1000],\n            format: 1023,\n            type: 1009,\n            encoding: 3000,\n            minFilter: 1008,\n            magFilter: 1006,\n            anisotropy: 1,\n            flipY: true,\n            premultiplyAlpha: false,\n            unpackAlignment: 4\n          }\n        };\n      }\n      console.log('updatedTextures', updatedTextures);\n      setTextures(updatedTextures);\n    }\n  }, [clonedTextures]);\n  if (materialRef.current) {\n    materialRef.current.needsUpdate = true;\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"mesh\", {\n      name: node.name,\n      geometry: node.geometry,\n      ref: meshRef,\n      userData: {\n        name: node.userData.name\n      },\n      onPointerDown: e => {\n        setIsPointerDown(true);\n      },\n      onPointerMove: e => {\n        if (isPointerDown) {\n          setIsPointerMoved(true);\n        }\n      },\n      onClick: e => {\n        var _e$intersections$find;\n        setIsPointerDown(false);\n        setIsPointerMoved(false);\n        if (!isPointerDown || isPointerMoved) {\n          return;\n        }\n        if (editText !== null && editText !== void 0 && editText.key) {\n          return;\n        }\n        const intersectedText = (_e$intersections$find = e.intersections.find(intersection => intersection.object.userData.text)) === null || _e$intersections$find === void 0 ? void 0 : _e$intersections$find.object.userData.text;\n\n        /**\r\n         * If text is clicked, go to NavItem to text\r\n         */\n        if (navItemText && navItemText.index !== undefined && intersectedText && intersectedText.key) {\n          setSelectedNav(navItemText.index);\n          updateText(intersectedText.key, {\n            edit: true\n          });\n          return;\n        }\n\n        /**\r\n         * If mesh part is clicked, go to NavItem of part\r\n         */\n        if (navItem && navItem.index !== undefined && e.intersections[0].object.name === node.name) {\n          e.stopPropagation();\n          setSelectedNav(navItem.index);\n        }\n      },\n      children: tassels ? /*#__PURE__*/_jsxDEV(\"meshStandardMaterial\", {\n        ref: materialRef,\n        ...tasselsTexture,\n        transparent: true,\n        bumpScale: 0.15,\n        color: hex,\n        side: DoubleSide,\n        metalness: -0.5\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"meshStandardMaterial\", {\n        side: DoubleSide,\n        ...textures,\n        displacementScale: textures !== null && textures !== void 0 && textures.displacementMap ? 0 : undefined,\n        ref: materialRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n_s(ClonedTextureMesh, \"eO6SRBHk/Zph0G2dRubeK7kwqnk=\", false, function () {\n  return [useCustomiserStore];\n});\n_c = ClonedTextureMesh;\nconst CustomiserMesh = ({\n  node,\n  nodeId\n}) => {\n  _s2();\n  // console.log('[CustomiserMesh] - node', node);\n  // console.log('[CustomiserMesh] - nodeId', nodeId);\n  const texture = useCustomiserStore(useCallback(state => state.texture(nodeId), [nodeId]));\n  // const texture = {\n  //   id: '113',\n  //   materials: {\n  //     aoMap:\n  //       'https://boxxer-api-dev.nyc3.cdn.digitaloceanspaces.com/reversable_balck_and_white_Ambient_Occlusion_b995a764bd.jpg',\n  //     map: 'https://boxxer-api-dev.nyc3.cdn.digitaloceanspaces.com/reversable_balck_and_white_Base_Color_cbb5586913.jpg',\n  //     displacementMap:\n  //       'https://boxxer-api-dev.nyc3.cdn.digitaloceanspaces.com/reversable_balck_and_white_Height_7fcb43f354.jpg',\n  //     metalnessMap:\n  //       'https://boxxer-api-dev.nyc3.cdn.digitaloceanspaces.com/reversable_balck_and_white_Metallic_c795661afb.jpg',\n  //     normalMap:\n  //       'https://boxxer-api-dev.nyc3.cdn.digitaloceanspaces.com/reversable_balck_and_white_Normal_b172f08ce5.jpg',\n  //     roughnessMap:\n  //       'https://boxxer-api-dev.nyc3.cdn.digitaloceanspaces.com/reversable_balck_and_white_Roughness_f1bf905c0a.jpg',\n  //   },\n  //   hex: '#000000',\n  // };\n  console.log('[CustomiserMesh] - texture', texture);\n  const optional = useCustomiserStore(useCallback(state => state.optional(nodeId), [nodeId]));\n  const tassels = useCustomiserStore(useCallback(state => state.tassels(nodeId), [nodeId]));\n  const materialTexture = useTexture({\n    ...texture.materials\n  });\n  console.log('[CustomiserMesh] - materialTexture', materialTexture);\n  const tasselsTexture = useTexture({\n    alphaMap: 'https://boxxer-api-dev.nyc3.cdn.digitaloceanspaces.com/tassels/tassels-opacity.jpg',\n    bumpMap: 'https://boxxer-api-dev.nyc3.cdn.digitaloceanspaces.com/tassels/tassels-bump.jpg'\n  }, textures => {\n    const [bumpMap, alphaMap] = textures;\n    alphaMap.wrapS = alphaMap.wrapT = RepeatWrapping;\n    alphaMap.flipY = false;\n    alphaMap.repeat.set(1.5, 1);\n    alphaMap.needsUpdate = true;\n    bumpMap.wrapS = bumpMap.wrapT = RepeatWrapping;\n    bumpMap.flipY = false;\n    bumpMap.repeat.set(1.5, 1);\n    bumpMap.needsUpdate = true;\n  });\n  if (optional) {\n    return null;\n  }\n  return /*#__PURE__*/_jsxDEV(ClonedTextureMesh, {\n    node: node,\n    texture: materialTexture,\n    tasselsTexture: tasselsTexture,\n    tassels: tassels,\n    hex: texture.hex\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 384,\n    columnNumber: 5\n  }, this);\n};\n_s2(CustomiserMesh, \"E5CxVg8XtImb+pVTeWZBir2ysoY=\", false, function () {\n  return [useCustomiserStore, useCustomiserStore, useCustomiserStore, useTexture, useTexture];\n});\n_c2 = CustomiserMesh;\nexport default CustomiserMesh;\nvar _c, _c2;\n$RefreshReg$(_c, \"ClonedTextureMesh\");\n$RefreshReg$(_c2, \"CustomiserMesh\");","map":{"version":3,"names":["useTexture","useCustomiserStore","useCallback","useEffect","useMemo","useRef","useState","Box3","DoubleSide","RepeatWrapping","Vector3","jsxDEV","_jsxDEV","Fragment","_Fragment","ClonedTextureMesh","node","texture","tasselsTexture","tassels","hex","_s","textures","setTextures","materialRef","meshRef","isPointerDown","setIsPointerDown","isPointerMoved","setIsPointerMoved","clonedTextures","Object","fromEntries","entries","map","k","v","clone","navItems","customProduct","setSelectedNav","texts","updateText","editText","find","t","edit","part","_customProduct$attrib","_customProduct$attrib2","attributes","parts","p","_p$modelParts","modelParts","data","mp","_mp$attributes","_mp$attributes2","nodeId","userData","name","navItem","id","navItemText","type","current","updatedTextures","key","wrapS","wrapT","boundingBox","setFromObject","boxSize","dimensions","getSize","area","x","y","repeat","set","keys","length","roughnessMap","metadata","version","generator","uuid","image","mapping","offset","center","rotation","wrap","format","encoding","minFilter","magFilter","anisotropy","flipY","premultiplyAlpha","unpackAlignment","normalMap","metalnessMap","displacementMap","aoMap","console","log","needsUpdate","children","geometry","ref","onPointerDown","e","onPointerMove","onClick","_e$intersections$find","intersectedText","intersections","intersection","object","text","index","undefined","stopPropagation","transparent","bumpScale","color","side","metalness","fileName","_jsxFileName","lineNumber","columnNumber","displacementScale","_c","CustomiserMesh","_s2","state","optional","materialTexture","materials","alphaMap","bumpMap","_c2","$RefreshReg$"],"sources":["C:/Users/Reian/Desktop/Work/Freelance/Boxxer World/boxxerworld-shopify-frontend/customiser/src/components/three/CustomiserMesh/CustomiserMesh.tsx"],"sourcesContent":["// eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n// @ts-nocheck\r\nimport { MaterialTextureMapModel } from '@models';\r\nimport { useTexture } from '@react-three/drei';\r\nimport { TextCustomiser, useCustomiserStore } from '@store/customiser';\r\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react';\r\nimport {\r\n  Box3,\r\n  DoubleSide,\r\n  Mesh,\r\n  MeshStandardMaterial,\r\n  RepeatWrapping,\r\n  Texture,\r\n  Vector3,\r\n} from 'three';\r\nexport interface ClonedTextureMeshProps {\r\n  node: Mesh;\r\n  texture: MaterialTextureMapModel;\r\n  tasselsTexture: MaterialTextureMapModel;\r\n  tassels: boolean;\r\n  hex: string;\r\n}\r\n\r\nconst ClonedTextureMesh = ({\r\n  node,\r\n  texture,\r\n  tasselsTexture,\r\n  tassels,\r\n  hex,\r\n}: ClonedTextureMeshProps) => {\r\n  const [textures, setTextures] = useState<MaterialTextureMapModel>();\r\n  const materialRef = useRef<MeshStandardMaterial>(null);\r\n  const meshRef = useRef<Mesh>(null);\r\n\r\n  const [isPointerDown, setIsPointerDown] = useState(false);\r\n  const [isPointerMoved, setIsPointerMoved] = useState(false);\r\n\r\n  const clonedTextures = useMemo(\r\n    () => Object.fromEntries(Object.entries(texture).map(([k, v]) => [k, v.clone()])),\r\n    [texture],\r\n  );\r\n\r\n  const { navItems, customProduct, setSelectedNav, texts, updateText } = useCustomiserStore();\r\n\r\n  const editText = useMemo(() => texts.find((t) => t.edit), [texts]);\r\n\r\n  const part = useMemo(\r\n    () =>\r\n      customProduct?.attributes?.parts?.find((p) =>\r\n        p?.modelParts?.data.find(\r\n          (mp) =>\r\n            mp.attributes?.nodeId === node.userData.name || mp.attributes?.nodeId === node.name,\r\n        ),\r\n      ),\r\n    [customProduct, node],\r\n  );\r\n  const navItem = useMemo(\r\n    () => navItems.find((navItem) => navItem.id === part?.id),\r\n    [part, navItems],\r\n  );\r\n\r\n  const navItemText = useMemo(\r\n    () => navItems.find((navItem) => navItem.type === 'names'),\r\n    [navItems],\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (clonedTextures && meshRef.current) {\r\n      let updatedTextures: MaterialTextureMapModel = {};\r\n      for (const [key, clone] of Object.entries(clonedTextures)) {\r\n        clone.wrapS = clone.wrapT = RepeatWrapping;\r\n        const boundingBox = new Box3().setFromObject(meshRef.current);\r\n        const boxSize = new Vector3();\r\n        const dimensions = boundingBox.getSize(boxSize);\r\n        const area = dimensions.x * dimensions.y;\r\n        clone.repeat.set(0.0005 * area, 0.0005 * area);\r\n        updatedTextures = { ...updatedTextures, [key]: clone };\r\n      }\r\n\r\n      if (Object.keys(part).length && part.name === 'Second Area') {\r\n        updatedTextures = {\r\n          roughnessMap: {\r\n            metadata: {\r\n              version: 4.5,\r\n              type: 'Texture',\r\n              generator: 'Texture.toJSON',\r\n            },\r\n            uuid: '7a26888a-da52-41b4-b18f-f3e79388431a',\r\n            name: '',\r\n            image: 'cb6b072e-121e-40ae-b127-f858a697e225',\r\n            mapping: 300,\r\n            repeat: [0.011443577143240135, 0.011443577143240135],\r\n            offset: [0, 0],\r\n            center: [0, 0],\r\n            rotation: 0,\r\n            wrap: [1000, 1000],\r\n            format: 1023,\r\n            type: 1009,\r\n            encoding: 3000,\r\n            minFilter: 1008,\r\n            magFilter: 1006,\r\n            anisotropy: 1,\r\n            flipY: true,\r\n            premultiplyAlpha: false,\r\n            unpackAlignment: 4,\r\n          },\r\n          normalMap: {\r\n            metadata: {\r\n              version: 4.5,\r\n              type: 'Texture',\r\n              generator: 'Texture.toJSON',\r\n            },\r\n            uuid: 'a8384cce-87bc-43d2-8662-a71f7dac71f2',\r\n            name: '',\r\n            image: 'f84ee0c8-155c-45c3-bac0-14b071cb03ca',\r\n            mapping: 300,\r\n            repeat: [0.011443577143240135, 0.011443577143240135],\r\n            offset: [0, 0],\r\n            center: [0, 0],\r\n            rotation: 0,\r\n            wrap: [1000, 1000],\r\n            format: 1023,\r\n            type: 1009,\r\n            encoding: 3000,\r\n            minFilter: 1008,\r\n            magFilter: 1006,\r\n            anisotropy: 1,\r\n            flipY: true,\r\n            premultiplyAlpha: false,\r\n            unpackAlignment: 4,\r\n          },\r\n          metalnessMap: {\r\n            metadata: {\r\n              version: 4.5,\r\n              type: 'Texture',\r\n              generator: 'Texture.toJSON',\r\n            },\r\n            uuid: '3ce5d6c1-0289-4c44-bcd9-431b5d8faef0',\r\n            name: '',\r\n            image: '2d845c89-dd87-4bd9-9c5b-a39efdd82039',\r\n            mapping: 300,\r\n            repeat: [0.011443577143240135, 0.011443577143240135],\r\n            offset: [0, 0],\r\n            center: [0, 0],\r\n            rotation: 0,\r\n            wrap: [1000, 1000],\r\n            format: 1023,\r\n            type: 1009,\r\n            encoding: 3000,\r\n            minFilter: 1008,\r\n            magFilter: 1006,\r\n            anisotropy: 1,\r\n            flipY: true,\r\n            premultiplyAlpha: false,\r\n            unpackAlignment: 4,\r\n          },\r\n          displacementMap: {\r\n            metadata: {\r\n              version: 4.5,\r\n              type: 'Texture',\r\n              generator: 'Texture.toJSON',\r\n            },\r\n            uuid: '7995f575-83fd-4c6c-8011-f4d99e3cdefa',\r\n            name: '',\r\n            image: '01c9a9ad-a532-45ab-8fa9-1dc1fb33ad97',\r\n            mapping: 300,\r\n            repeat: [0.011443577143240135, 0.011443577143240135],\r\n            offset: [0, 0],\r\n            center: [0, 0],\r\n            rotation: 0,\r\n            wrap: [1000, 1000],\r\n            format: 1023,\r\n            type: 1009,\r\n            encoding: 3000,\r\n            minFilter: 1008,\r\n            magFilter: 1006,\r\n            anisotropy: 1,\r\n            flipY: true,\r\n            premultiplyAlpha: false,\r\n            unpackAlignment: 4,\r\n          },\r\n          map: {\r\n            metadata: {\r\n              version: 4.5,\r\n              type: 'Texture',\r\n              generator: 'Texture.toJSON',\r\n            },\r\n            uuid: 'e7255d48-5148-4a54-86f6-5c5fc2ef8bea',\r\n            name: '',\r\n            image: 'a67972ac-9798-4c0d-bad3-f75cf5e6192b',\r\n            mapping: 300,\r\n            repeat: [0.011443577143240135, 0.011443577143240135],\r\n            offset: [0, 0],\r\n            center: [0, 0],\r\n            rotation: 0,\r\n            wrap: [1000, 1000],\r\n            format: 1023,\r\n            type: 1009,\r\n            encoding: 3000,\r\n            minFilter: 1008,\r\n            magFilter: 1006,\r\n            anisotropy: 1,\r\n            flipY: true,\r\n            premultiplyAlpha: false,\r\n            unpackAlignment: 4,\r\n          },\r\n          aoMap: {\r\n            metadata: {\r\n              version: 4.5,\r\n              type: 'Texture',\r\n              generator: 'Texture.toJSON',\r\n            },\r\n            uuid: '9ea9cc0e-fb8c-48c0-83b6-d78cea7f7eb9',\r\n            name: '',\r\n            image: '9e292731-857c-4a24-b754-ec2e0206970b',\r\n            mapping: 300,\r\n            repeat: [0.011443577143240135, 0.011443577143240135],\r\n            offset: [0, 0],\r\n            center: [0, 0],\r\n            rotation: 0,\r\n            wrap: [1000, 1000],\r\n            format: 1023,\r\n            type: 1009,\r\n            encoding: 3000,\r\n            minFilter: 1008,\r\n            magFilter: 1006,\r\n            anisotropy: 1,\r\n            flipY: true,\r\n            premultiplyAlpha: false,\r\n            unpackAlignment: 4,\r\n          },\r\n        };\r\n      }\r\n\r\n      console.log('updatedTextures', updatedTextures);\r\n      setTextures(updatedTextures);\r\n    }\r\n  }, [clonedTextures]);\r\n\r\n  if (materialRef.current) {\r\n    materialRef.current.needsUpdate = true;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <mesh\r\n        name={node.name}\r\n        geometry={node.geometry}\r\n        ref={meshRef}\r\n        userData={{\r\n          name: node.userData.name,\r\n        }}\r\n        onPointerDown={(e) => {\r\n          setIsPointerDown(true);\r\n        }}\r\n        onPointerMove={(e) => {\r\n          if (isPointerDown) {\r\n            setIsPointerMoved(true);\r\n          }\r\n        }}\r\n        onClick={(e) => {\r\n          setIsPointerDown(false);\r\n          setIsPointerMoved(false);\r\n\r\n          if (!isPointerDown || isPointerMoved) {\r\n            return;\r\n          }\r\n\r\n          if (editText?.key) {\r\n            return;\r\n          }\r\n\r\n          const intersectedText = e.intersections.find(\r\n            (intersection) => intersection.object.userData.text,\r\n          )?.object.userData.text as TextCustomiser | undefined;\r\n\r\n          /**\r\n           * If text is clicked, go to NavItem to text\r\n           */\r\n          if (\r\n            navItemText &&\r\n            navItemText.index !== undefined &&\r\n            intersectedText &&\r\n            intersectedText.key\r\n          ) {\r\n            setSelectedNav(navItemText.index);\r\n            updateText(intersectedText.key, { edit: true });\r\n\r\n            return;\r\n          }\r\n\r\n          /**\r\n           * If mesh part is clicked, go to NavItem of part\r\n           */\r\n          if (\r\n            navItem &&\r\n            navItem.index !== undefined &&\r\n            e.intersections[0].object.name === node.name\r\n          ) {\r\n            e.stopPropagation();\r\n\r\n            setSelectedNav(navItem.index);\r\n          }\r\n        }}\r\n      >\r\n        {tassels ? (\r\n          <meshStandardMaterial\r\n            ref={materialRef}\r\n            {...tasselsTexture}\r\n            transparent\r\n            bumpScale={0.15}\r\n            color={hex}\r\n            side={DoubleSide}\r\n            metalness={-0.5}\r\n          />\r\n        ) : (\r\n          <meshStandardMaterial\r\n            side={DoubleSide}\r\n            {...textures}\r\n            displacementScale={textures?.displacementMap ? 0 : undefined}\r\n            ref={materialRef}\r\n          />\r\n        )}\r\n      </mesh>\r\n    </>\r\n  );\r\n};\r\nexport interface CustomiserMeshProps {\r\n  node: Mesh;\r\n  nodeId: string;\r\n}\r\n\r\nconst CustomiserMesh = ({ node, nodeId }: CustomiserMeshProps) => {\r\n  // console.log('[CustomiserMesh] - node', node);\r\n  // console.log('[CustomiserMesh] - nodeId', nodeId);\r\n  const texture = useCustomiserStore(useCallback((state) => state.texture(nodeId), [nodeId]));\r\n  // const texture = {\r\n  //   id: '113',\r\n  //   materials: {\r\n  //     aoMap:\r\n  //       'https://boxxer-api-dev.nyc3.cdn.digitaloceanspaces.com/reversable_balck_and_white_Ambient_Occlusion_b995a764bd.jpg',\r\n  //     map: 'https://boxxer-api-dev.nyc3.cdn.digitaloceanspaces.com/reversable_balck_and_white_Base_Color_cbb5586913.jpg',\r\n  //     displacementMap:\r\n  //       'https://boxxer-api-dev.nyc3.cdn.digitaloceanspaces.com/reversable_balck_and_white_Height_7fcb43f354.jpg',\r\n  //     metalnessMap:\r\n  //       'https://boxxer-api-dev.nyc3.cdn.digitaloceanspaces.com/reversable_balck_and_white_Metallic_c795661afb.jpg',\r\n  //     normalMap:\r\n  //       'https://boxxer-api-dev.nyc3.cdn.digitaloceanspaces.com/reversable_balck_and_white_Normal_b172f08ce5.jpg',\r\n  //     roughnessMap:\r\n  //       'https://boxxer-api-dev.nyc3.cdn.digitaloceanspaces.com/reversable_balck_and_white_Roughness_f1bf905c0a.jpg',\r\n  //   },\r\n  //   hex: '#000000',\r\n  // };\r\n  console.log('[CustomiserMesh] - texture', texture);\r\n  const optional = useCustomiserStore(useCallback((state) => state.optional(nodeId), [nodeId]));\r\n  const tassels = useCustomiserStore(useCallback((state) => state.tassels(nodeId), [nodeId]));\r\n\r\n  const materialTexture = useTexture({ ...texture.materials });\r\n  console.log('[CustomiserMesh] - materialTexture', materialTexture);\r\n  const tasselsTexture = useTexture(\r\n    {\r\n      alphaMap:\r\n        'https://boxxer-api-dev.nyc3.cdn.digitaloceanspaces.com/tassels/tassels-opacity.jpg',\r\n      bumpMap: 'https://boxxer-api-dev.nyc3.cdn.digitaloceanspaces.com/tassels/tassels-bump.jpg',\r\n    },\r\n    (textures) => {\r\n      const [bumpMap, alphaMap] = textures as Texture[];\r\n      alphaMap.wrapS = alphaMap.wrapT = RepeatWrapping;\r\n      alphaMap.flipY = false;\r\n      alphaMap.repeat.set(1.5, 1);\r\n      alphaMap.needsUpdate = true;\r\n      bumpMap.wrapS = bumpMap.wrapT = RepeatWrapping;\r\n      bumpMap.flipY = false;\r\n      bumpMap.repeat.set(1.5, 1);\r\n      bumpMap.needsUpdate = true;\r\n    },\r\n  );\r\n\r\n  if (optional) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <ClonedTextureMesh\r\n      node={node}\r\n      texture={materialTexture}\r\n      tasselsTexture={tasselsTexture}\r\n      tassels={tassels}\r\n      hex={texture.hex}\r\n    />\r\n  );\r\n};\r\n\r\nexport default CustomiserMesh;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}