{"ast":null,"code":"import PillButton from'@components/ui/PillButton';import{useCustomiserStore}from'@store/customiser';import cn from'classnames';import{motion}from'framer-motion';import{Suspense,useEffect,useMemo,useState}from'react';import MaterialGroup from'../MaterialGroup';import NavButtons from'../NavButtons';import styles from'./NavPart.module.scss';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const NavPart=_ref=>{var _parts$find,_part$materialGroup,_currentPart$material,_currentPart$material2,_currentPart$material3,_currentPart$material4;let{className,part}=_ref;const rootClassName=cn(styles.root,className);const selectedPart=useCustomiserStore(state=>state.selectedPart);const setPart=useCustomiserStore(state=>state.setPart);const removePart=useCustomiserStore(state=>state.removePart);const parts=useCustomiserStore(state=>state.parts);const currentPart=useMemo(()=>parts.find(p=>p.part.id===(part===null||part===void 0?void 0:part.id)),[part]);const[showOptional,setShowOptional]=useState(false);let selectedMaterialId=(_parts$find=parts.find(part=>part.part.name===(selectedPart===null||selectedPart===void 0?void 0:selectedPart.name)))===null||_parts$find===void 0?void 0:_parts$find.material.id;const confirmText=!selectedMaterialId?'Are you sure you want to continue with the default color?':null;if(!(part!==null&&part!==void 0&&(_part$materialGroup=part.materialGroup)!==null&&_part$materialGroup!==void 0&&_part$materialGroup.data)){return null;}const onMaterialSelected=material=>{if(selectedPart&&material){selectedMaterialId=material.id;setPart(selectedPart,material);}};const optionalOnClick=show=>{setShowOptional(show);if(!show){removePart(part);}};useEffect(()=>{if(part.optional&&!showOptional&&currentPart){setShowOptional(true);}},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(motion.div,{className:rootClassName,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[part.optional&&/*#__PURE__*/_jsxs(PillButton,{className:styles.showOptional,selected:showOptional,onClick:()=>optionalOnClick(!showOptional),children:[showOptional?'Remove':'Add',\" \",part.name]}),(!part.optional||part.optional&&showOptional)&&/*#__PURE__*/_jsx(Suspense,{fallback:/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}),children:/*#__PURE__*/_jsx(MaterialGroup,{materialGroup:part.materialGroup.data,materialType:currentPart===null||currentPart===void 0?void 0:(_currentPart$material=currentPart.material.attributes)===null||_currentPart$material===void 0?void 0:(_currentPart$material2=_currentPart$material.type)===null||_currentPart$material2===void 0?void 0:_currentPart$material2.data,colourGroup:currentPart===null||currentPart===void 0?void 0:(_currentPart$material3=currentPart.material.attributes)===null||_currentPart$material3===void 0?void 0:(_currentPart$material4=_currentPart$material3.colourGroups)===null||_currentPart$material4===void 0?void 0:_currentPart$material4.data[0],onMaterialSelected:onMaterialSelected,selectedMaterialId:selectedMaterialId})})]},part.id),/*#__PURE__*/_jsx(NavButtons,{confirmStorage:\"partsMaterial\",confirmText:confirmText})]});};export default NavPart;","map":{"version":3,"names":["PillButton","useCustomiserStore","cn","motion","Suspense","useEffect","useMemo","useState","MaterialGroup","NavButtons","styles","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","NavPart","_ref","_parts$find","_part$materialGroup","_currentPart$material","_currentPart$material2","_currentPart$material3","_currentPart$material4","className","part","rootClassName","root","selectedPart","state","setPart","removePart","parts","currentPart","find","p","id","showOptional","setShowOptional","selectedMaterialId","name","material","confirmText","materialGroup","data","onMaterialSelected","optionalOnClick","show","optional","children","div","initial","opacity","animate","exit","selected","onClick","fallback","materialType","attributes","type","colourGroup","colourGroups","confirmStorage"],"sources":["C:/Users/Reian/Desktop/Work/Freelance/Boxxer World/boxxerworld-shopify-frontend/customiser/src/components/nav/NavPart/NavPart.tsx"],"sourcesContent":["import PillButton from '@components/ui/PillButton';\r\nimport { CustomProductPartFragment, MaterialFragment } from '@graphql/generated/graphql';\r\nimport { useCustomiserStore } from '@store/customiser';\r\nimport cn from 'classnames';\r\nimport { motion } from 'framer-motion';\r\nimport { Suspense, useEffect, useMemo, useState } from 'react';\r\nimport MaterialGroup from '../MaterialGroup';\r\nimport NavButtons from '../NavButtons';\r\n\r\nimport styles from './NavPart.module.scss';\r\n\r\nexport interface NavPartProps {\r\n  className?: string;\r\n  part: CustomProductPartFragment;\r\n}\r\n\r\nconst NavPart = ({ className, part }: NavPartProps) => {\r\n  const rootClassName = cn(styles.root, className);\r\n  const selectedPart = useCustomiserStore((state) => state.selectedPart);\r\n  const setPart = useCustomiserStore((state) => state.setPart);\r\n  const removePart = useCustomiserStore((state) => state.removePart);\r\n  const parts = useCustomiserStore((state) => state.parts);\r\n  const currentPart = useMemo(() => parts.find((p) => p.part.id === part?.id), [part]);\r\n  const [showOptional, setShowOptional] = useState(false);\r\n\r\n  let selectedMaterialId = parts.find((part) => part.part.name === selectedPart?.name)?.material.id;\r\n  const confirmText = !selectedMaterialId\r\n    ? 'Are you sure you want to continue with the default color?'\r\n    : null;\r\n\r\n  if (!part?.materialGroup?.data) {\r\n    return null;\r\n  }\r\n\r\n  const onMaterialSelected = (material: MaterialFragment) => {\r\n    if (selectedPart && material) {\r\n      selectedMaterialId = material.id;\r\n      setPart(selectedPart, material);\r\n    }\r\n  };\r\n\r\n  const optionalOnClick = (show: boolean) => {\r\n    setShowOptional(show);\r\n    if (!show) {\r\n      removePart(part);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (part.optional && !showOptional && currentPart) {\r\n      setShowOptional(true);\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <motion.div\r\n        key={part.id}\r\n        className={rootClassName}\r\n        initial={{ opacity: 0 }}\r\n        animate={{ opacity: 1 }}\r\n        exit={{ opacity: 0 }}\r\n      >\r\n        {part.optional && (\r\n          <PillButton\r\n            className={styles.showOptional}\r\n            selected={showOptional}\r\n            onClick={() => optionalOnClick(!showOptional)}\r\n          >\r\n            {showOptional ? 'Remove' : 'Add'} {part.name}\r\n          </PillButton>\r\n        )}\r\n        {(!part.optional || (part.optional && showOptional)) && (\r\n          <Suspense fallback={<div>Loading...</div>}>\r\n            <MaterialGroup\r\n              materialGroup={part.materialGroup.data}\r\n              materialType={currentPart?.material.attributes?.type?.data}\r\n              colourGroup={currentPart?.material.attributes?.colourGroups?.data[0]}\r\n              onMaterialSelected={onMaterialSelected}\r\n              selectedMaterialId={selectedMaterialId}\r\n            />\r\n          </Suspense>\r\n        )}\r\n      </motion.div>\r\n      <NavButtons confirmStorage='partsMaterial' confirmText={confirmText} />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default NavPart;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}