{"ast":null,"code":"import Price from'@components/ui/Price';import{useGetNamesQuery}from'@graphql/generated/graphql';import{graphQLClient}from'@graphql/graphql-client';import{useCustomiserStore}from'@store/customiser';import{useEffect,useRef}from'react';import MaterialGroup from'../MaterialGroup';import styles from'./NavText.module.scss';import cn from'classnames';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const NavTextNameTypes=_ref=>{var _selectedName$attribu14,_selectedName$attribu15,_editText$material,_editText$material$at,_editText$material$at2,_editText$material2,_editText$material2$a,_editText$material2$a2;let{editText={}}=_ref;const updateText=useCustomiserStore(state=>state.updateText);const{selectedName}=editText;const prevSelectedName=useRef(selectedName);const{data:names}=useGetNamesQuery(graphQLClient,{},{select:data=>{var _data$names;return(_data$names=data.names)===null||_data$names===void 0?void 0:_data$names.data;}});useEffect(()=>{if(editText!==null&&editText!==void 0&&editText.key&&selectedName&&prevSelectedName.current!==selectedName){var _selectedName$attribu,_selectedName$attribu2,_selectedName$attribu3,_selectedName$attribu4,_selectedName$attribu5,_selectedName$attribu6,_selectedName$attribu7,_selectedName$attribu8,_selectedName$attribu9,_selectedName$attribu10,_selectedName$attribu11,_selectedName$attribu12,_selectedName$attribu13;prevSelectedName.current=selectedName;updateText(editText.key,{basePrice:{price:(_selectedName$attribu=selectedName.attributes)===null||_selectedName$attribu===void 0?void 0:(_selectedName$attribu2=_selectedName$attribu.basePrice)===null||_selectedName$attribu2===void 0?void 0:_selectedName$attribu2.price,quantity:1,shopifyVariantId:(_selectedName$attribu3=selectedName.attributes)===null||_selectedName$attribu3===void 0?void 0:(_selectedName$attribu4=_selectedName$attribu3.basePrice)===null||_selectedName$attribu4===void 0?void 0:_selectedName$attribu4.shopifyVariantId},letterPrice:{price:(_selectedName$attribu5=selectedName.attributes)===null||_selectedName$attribu5===void 0?void 0:(_selectedName$attribu6=_selectedName$attribu5.letterPrice)===null||_selectedName$attribu6===void 0?void 0:_selectedName$attribu6.price,quantity:1,shopifyVariantId:(_selectedName$attribu7=selectedName.attributes)===null||_selectedName$attribu7===void 0?void 0:(_selectedName$attribu8=_selectedName$attribu7.letterPrice)===null||_selectedName$attribu8===void 0?void 0:_selectedName$attribu8.shopifyVariantId},nameType:{id:selectedName.id,name:(_selectedName$attribu9=selectedName.attributes)===null||_selectedName$attribu9===void 0?void 0:_selectedName$attribu9.name},/**\r\n         * Reset material when selectedName changes.\r\n         *\r\n         * Different name types would have different\r\n         * material groups.\r\n         */material:undefined,...(editText.outline?{outlinePrice:{price:(_selectedName$attribu10=selectedName.attributes)===null||_selectedName$attribu10===void 0?void 0:(_selectedName$attribu11=_selectedName$attribu10.outlinePrice)===null||_selectedName$attribu11===void 0?void 0:_selectedName$attribu11.price,quantity:1,shopifyVariantId:(_selectedName$attribu12=selectedName.attributes)===null||_selectedName$attribu12===void 0?void 0:(_selectedName$attribu13=_selectedName$attribu12.outlinePrice)===null||_selectedName$attribu13===void 0?void 0:_selectedName$attribu13.shopifyVariantId}}:{}),puffPrice:undefined});}},[selectedName]);const setMaterial=material=>{if(editText!==null&&editText!==void 0&&editText.key){updateText(editText.key,{material});}};const setSelectedName=name=>{if(editText!==null&&editText!==void 0&&editText.key){updateText(editText.key,{selectedName:name});}};return/*#__PURE__*/_jsxs(_Fragment,{children:[!selectedName&&/*#__PURE__*/_jsx(\"i\",{className:styles.promptMessage,children:\"Select a text color type\"}),/*#__PURE__*/_jsx(\"div\",{className:styles.finishSelections,children:names===null||names===void 0?void 0:names.map(n=>{var _n$attributes,_n$attributes2,_n$attributes2$basePr,_n$attributes3,_n$attributes3$letter;return/*#__PURE__*/_jsxs(\"div\",{className:cn(styles.finishSelection,{[styles.selected]:selectedName&&n.id===selectedName.id}),onClick:()=>setSelectedName(n),children:[(_n$attributes=n.attributes)===null||_n$attributes===void 0?void 0:_n$attributes.name,/*#__PURE__*/_jsxs(\"div\",{className:styles.pricing,children:[/*#__PURE__*/_jsx(Price,{price:(_n$attributes2=n.attributes)===null||_n$attributes2===void 0?void 0:(_n$attributes2$basePr=_n$attributes2.basePrice)===null||_n$attributes2$basePr===void 0?void 0:_n$attributes2$basePr.price}),' + ',/*#__PURE__*/_jsx(Price,{price:(_n$attributes3=n.attributes)===null||_n$attributes3===void 0?void 0:(_n$attributes3$letter=_n$attributes3.letterPrice)===null||_n$attributes3$letter===void 0?void 0:_n$attributes3$letter.price}),\" per letter\"]})]},n.id);})}),selectedName&&/*#__PURE__*/_jsx(MaterialGroup,{hideColorGroups:true,materialGroup:selectedName===null||selectedName===void 0?void 0:(_selectedName$attribu14=selectedName.attributes)===null||_selectedName$attribu14===void 0?void 0:(_selectedName$attribu15=_selectedName$attribu14.materialGroup)===null||_selectedName$attribu15===void 0?void 0:_selectedName$attribu15.data,materialType:editText===null||editText===void 0?void 0:(_editText$material=editText.material)===null||_editText$material===void 0?void 0:(_editText$material$at=_editText$material.attributes)===null||_editText$material$at===void 0?void 0:(_editText$material$at2=_editText$material$at.type)===null||_editText$material$at2===void 0?void 0:_editText$material$at2.data,colourGroup:editText===null||editText===void 0?void 0:(_editText$material2=editText.material)===null||_editText$material2===void 0?void 0:(_editText$material2$a=_editText$material2.attributes)===null||_editText$material2$a===void 0?void 0:(_editText$material2$a2=_editText$material2$a.colourGroups)===null||_editText$material2$a2===void 0?void 0:_editText$material2$a2.data[0],onMaterialSelected:setMaterial,className:styles.materialGroup})]});};export default NavTextNameTypes;","map":{"version":3,"names":["Price","useGetNamesQuery","graphQLClient","useCustomiserStore","useEffect","useRef","MaterialGroup","styles","cn","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","NavTextNameTypes","_ref","_selectedName$attribu14","_selectedName$attribu15","_editText$material","_editText$material$at","_editText$material$at2","_editText$material2","_editText$material2$a","_editText$material2$a2","editText","updateText","state","selectedName","prevSelectedName","data","names","select","_data$names","key","current","_selectedName$attribu","_selectedName$attribu2","_selectedName$attribu3","_selectedName$attribu4","_selectedName$attribu5","_selectedName$attribu6","_selectedName$attribu7","_selectedName$attribu8","_selectedName$attribu9","_selectedName$attribu10","_selectedName$attribu11","_selectedName$attribu12","_selectedName$attribu13","basePrice","price","attributes","quantity","shopifyVariantId","letterPrice","nameType","id","name","material","undefined","outline","outlinePrice","puffPrice","setMaterial","setSelectedName","children","className","promptMessage","finishSelections","map","n","_n$attributes","_n$attributes2","_n$attributes2$basePr","_n$attributes3","_n$attributes3$letter","finishSelection","selected","onClick","pricing","hideColorGroups","materialGroup","materialType","type","colourGroup","colourGroups","onMaterialSelected"],"sources":["C:/Users/Reian/Desktop/Work/Freelance/Boxxer World/boxxerworld-shopify-frontend/customiser/src/components/nav/NavText/NavTextNameTypes.tsx"],"sourcesContent":["import PillButton from '@components/ui/PillButton';\r\nimport Price from '@components/ui/Price';\r\nimport { MaterialFragment, NameEntity, useGetNamesQuery } from '@graphql/generated/graphql';\r\nimport { graphQLClient } from '@graphql/graphql-client';\r\nimport { TextCustomiser, useCustomiserStore } from '@store/customiser';\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport MaterialGroup from '../MaterialGroup';\r\n\r\nimport styles from './NavText.module.scss';\r\nimport cn from 'classnames';\r\n\r\nexport interface NavTextNameTypesProps {\r\n  editText?: TextCustomiser;\r\n}\r\n\r\nconst NavTextNameTypes = ({ editText = {} }: NavTextNameTypesProps) => {\r\n  const updateText = useCustomiserStore((state) => state.updateText);\r\n\r\n  const { selectedName } = editText;\r\n  const prevSelectedName = useRef(selectedName);\r\n\r\n  const { data: names } = useGetNamesQuery(\r\n    graphQLClient,\r\n    {},\r\n    {\r\n      select: (data) => data.names?.data,\r\n    },\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (editText?.key && selectedName && prevSelectedName.current !== selectedName) {\r\n      prevSelectedName.current = selectedName;\r\n\r\n      updateText(editText.key, {\r\n        basePrice: {\r\n          price: selectedName.attributes?.basePrice?.price,\r\n          quantity: 1,\r\n          shopifyVariantId: selectedName.attributes?.basePrice?.shopifyVariantId,\r\n        },\r\n        letterPrice: {\r\n          price: selectedName.attributes?.letterPrice?.price,\r\n          quantity: 1,\r\n          shopifyVariantId: selectedName.attributes?.letterPrice?.shopifyVariantId,\r\n        },\r\n        nameType: {\r\n          id: selectedName.id,\r\n          name: selectedName.attributes?.name,\r\n        },\r\n        /**\r\n         * Reset material when selectedName changes.\r\n         *\r\n         * Different name types would have different\r\n         * material groups.\r\n         */\r\n        material: undefined,\r\n        ...(editText.outline\r\n          ? {\r\n              outlinePrice: {\r\n                price: selectedName.attributes?.outlinePrice?.price,\r\n                quantity: 1,\r\n                shopifyVariantId: selectedName.attributes?.outlinePrice?.shopifyVariantId,\r\n              },\r\n            }\r\n          : {}),\r\n\r\n        puffPrice: undefined,\r\n      });\r\n    }\r\n  }, [selectedName]);\r\n\r\n  const setMaterial = (material: MaterialFragment) => {\r\n    if (editText?.key) {\r\n      updateText(editText.key, {\r\n        material,\r\n      });\r\n    }\r\n  };\r\n\r\n  const setSelectedName = (name: NameEntity) => {\r\n    if (editText?.key) {\r\n      updateText(editText.key, {\r\n        selectedName: name,\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {!selectedName && <i className={styles.promptMessage}>Select a text color type</i>}\r\n      <div className={styles.finishSelections}>\r\n        {names?.map((n) => (\r\n          <div\r\n            key={n.id}\r\n            className={cn(styles.finishSelection, {\r\n              [styles.selected]: selectedName && n.id === selectedName.id,\r\n            })}\r\n            onClick={() => setSelectedName(n)}\r\n          >\r\n            {n.attributes?.name}\r\n            <div className={styles.pricing}>\r\n              <Price price={n.attributes?.basePrice?.price} />\r\n              {' + '}\r\n              <Price price={n.attributes?.letterPrice?.price} /> per letter\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n      {selectedName && (\r\n        <MaterialGroup\r\n          hideColorGroups={true}\r\n          materialGroup={selectedName?.attributes?.materialGroup?.data}\r\n          materialType={editText?.material?.attributes?.type?.data}\r\n          colourGroup={editText?.material?.attributes?.colourGroups?.data[0]}\r\n          onMaterialSelected={setMaterial}\r\n          className={styles.materialGroup}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default NavTextNameTypes;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}